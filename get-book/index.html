
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="GeoLabs BookStore Docs">
      
      
        <meta name="author" content="Geovanny Mendoza">
      
      
        <link rel="canonical" href="https://geovannymcode.github.io/geolabs-bookstore.github.io/get-book/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../get-user/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.30">
    
    
      
        <title>Creacion Book - GeoLabs BookStore</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.3cba04c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#crear-proyecto-de-spring" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="GeoLabs BookStore" class="md-header__button md-logo" aria-label="GeoLabs BookStore" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GeoLabs BookStore
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Creacion Book
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://geovannymcode.github.io/geolabs-bookstore.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    /geovannymcode/geolabs-bookstore.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="GeoLabs BookStore" class="md-nav__button md-logo" aria-label="GeoLabs BookStore" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    GeoLabs BookStore
  </label>
  
    <div class="md-nav__source">
      <a href="https://geovannymcode.github.io/geolabs-bookstore.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    /geovannymcode/geolabs-bookstore.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Creacion Book
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Creacion Book
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#adicionar-dependencias" class="md-nav__link">
    <span class="md-ellipsis">
      Adicionar Dependencias
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adicionar Dependencias">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dependencias" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencias:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-docker-componse" class="md-nav__link">
    <span class="md-ellipsis">
      Creación Docker Componse
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creación Docker Componse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuracion-del-entorno-de-desarrollo-con-docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración del Entorno de Desarrollo con Docker Compose
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-crud" class="md-nav__link">
    <span class="md-ellipsis">
      Creacion CRUD
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creacion CRUD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creacion-entidad" class="md-nav__link">
    <span class="md-ellipsis">
      Creacion Entidad
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creacion Entidad">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-crear-la-clase-bookentity" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Crear la clase BookEntity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-validacion-de-la-entidad" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 2: Validación de la Entidad
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-repositorio" class="md-nav__link">
    <span class="md-ellipsis">
      Creacion Repositorio
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creacion Repositorio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-crear-el-repositorio-para-la-entidad-bookentity" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Crear el Repositorio para la Entidad BookEntity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#que-es-jparepository" class="md-nav__link">
    <span class="md-ellipsis">
      ¿Qué es JpaRepository?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-dto" class="md-nav__link">
    <span class="md-ellipsis">
      Creacion DTO
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creacion DTO">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-crear-el-dto" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Crear el DTO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-validacion-del-dto" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 2: Validación del DTO
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-servicio" class="md-nav__link">
    <span class="md-ellipsis">
      Creacion Servicio
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creacion Servicio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-crear-las-dependencias-necesarias" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Crear las Dependencias Necesarias
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-creacion-de-bookmapper" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 2: Creacion de BookMapper
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-3-crear-la-clase-del-servicio" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 3: Crear la Clase del Servicio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-paginacion" class="md-nav__link">
    <span class="md-ellipsis">
      Creacion Paginación
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-controlador" class="md-nav__link">
    <span class="md-ellipsis">
      Creación Controlador
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creación Controlador">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#descripcion-del-controlador" class="md-nav__link">
    <span class="md-ellipsis">
      Descripción del Controlador
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-1-creacion-de-la-clase-bookcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Creación de la Clase BookController
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adicionar-configuracion-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Adicionar configuracion Properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adicionar-flyway" class="md-nav__link">
    <span class="md-ellipsis">
      Adicionar flyway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probar-el-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      Probar el Endpoint
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Probar el Endpoint">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#probando-el-endpoint-general" class="md-nav__link">
    <span class="md-ellipsis">
      Probando el Endpoint General
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probando-el-endpoint-por-codigo-de-libro" class="md-nav__link">
    <span class="md-ellipsis">
      Probando el Endpoint por Código de Libro
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manejo-de-errores-para-codigos-no-existentes" class="md-nav__link">
    <span class="md-ellipsis">
      Manejo de Errores para Códigos No Existentes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corrigiendo-el-manejo-de-errores" class="md-nav__link">
    <span class="md-ellipsis">
      Corrigiendo el Manejo de Errores
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manejo-de-excepciones-de-la-api" class="md-nav__link">
    <span class="md-ellipsis">
      Manejo de Excepciones de la API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Manejo de Excepciones de la API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#excepcion-personalizada-booknotfoundexception" class="md-nav__link">
    <span class="md-ellipsis">
      Excepción Personalizada BookNotFoundException
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementacion-excepciones-de-la-api" class="md-nav__link">
    <span class="md-ellipsis">
      Implementación Excepciones de la API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manejando-excepciones-de-forma-global" class="md-nav__link">
    <span class="md-ellipsis">
      Manejando Excepciones de Forma Global
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementacion-excepciones-de-forma-global" class="md-nav__link">
    <span class="md-ellipsis">
      Implementación Excepciones de Forma Global
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementando-las-excepciones-en-el-servicio" class="md-nav__link">
    <span class="md-ellipsis">
      Implementando las Excepciones en el Servicio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enlace-a-codigo-http" class="md-nav__link">
    <span class="md-ellipsis">
      Enlace a Código HTTP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subida-de-archivos" class="md-nav__link">
    <span class="md-ellipsis">
      Subida de Archivos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Subida de Archivos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crear-la-clase-filesystemstorageservice" class="md-nav__link">
    <span class="md-ellipsis">
      Crear la clase FileSystemStorageService
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#excepcion-personalizada-resourcenotfoundexception" class="md-nav__link">
    <span class="md-ellipsis">
      Excepción Personalizada ResourceNotFoundException
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Excepción Personalizada ResourceNotFoundException">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implementacion-de-resourcenotfoundexception" class="md-nav__link">
    <span class="md-ellipsis">
      Implementación de ResourceNotFoundException
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#descripcion-de-la-implementacion" class="md-nav__link">
    <span class="md-ellipsis">
      Descripción de la Implementación
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controlador-para-la-subida-y-recuperacion-de-archivos" class="md-nav__link">
    <span class="md-ellipsis">
      Controlador para la Subida y Recuperación de Archivos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Controlador para la Subida y Recuperación de Archivos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crear-la-clase-filecontroller" class="md-nav__link">
    <span class="md-ellipsis">
      Crear la Clase FileController
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probar-endpoint-subir-archivo" class="md-nav__link">
    <span class="md-ellipsis">
      Probar Endpoint Subir Archivo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Probar Endpoint Subir Archivo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problema-inicial" class="md-nav__link">
    <span class="md-ellipsis">
      Problema Inicial
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagnostico-del-problema" class="md-nav__link">
    <span class="md-ellipsis">
      Diagnóstico del Problema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solucion" class="md-nav__link">
    <span class="md-ellipsis">
      Solución
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#incrementar-el-tamano-maximo-de-los-archivos-subidos" class="md-nav__link">
    <span class="md-ellipsis">
      Incrementar el Tamaño Máximo de los Archivos Subidos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Incrementar el Tamaño Máximo de los Archivos Subidos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resultado-final" class="md-nav__link">
    <span class="md-ellipsis">
      Resultado Final
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prueba-del-endpoint-post" class="md-nav__link">
    <span class="md-ellipsis">
      Prueba del Endpoint POST
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prueba-del-endpoint-get" class="md-nav__link">
    <span class="md-ellipsis">
      Prueba del Endpoint GET
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conlusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conlusión
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../get-user/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creacion User
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../get-order/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creacion Order e Item
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration-paypal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integración con PayPal API
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cache-redis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cache con Redis
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../spring-aop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Anotaciones con Spring AOP
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../bookstore-webapp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Frontend WebApp
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../testing-book/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing BookStore
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../good-practice/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tips de Desarrollo
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../referencia/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Referencias
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#adicionar-dependencias" class="md-nav__link">
    <span class="md-ellipsis">
      Adicionar Dependencias
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adicionar Dependencias">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dependencias" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencias:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-docker-componse" class="md-nav__link">
    <span class="md-ellipsis">
      Creación Docker Componse
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creación Docker Componse">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuracion-del-entorno-de-desarrollo-con-docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración del Entorno de Desarrollo con Docker Compose
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-crud" class="md-nav__link">
    <span class="md-ellipsis">
      Creacion CRUD
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creacion CRUD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creacion-entidad" class="md-nav__link">
    <span class="md-ellipsis">
      Creacion Entidad
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creacion Entidad">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-crear-la-clase-bookentity" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Crear la clase BookEntity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-validacion-de-la-entidad" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 2: Validación de la Entidad
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-repositorio" class="md-nav__link">
    <span class="md-ellipsis">
      Creacion Repositorio
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creacion Repositorio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-crear-el-repositorio-para-la-entidad-bookentity" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Crear el Repositorio para la Entidad BookEntity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#que-es-jparepository" class="md-nav__link">
    <span class="md-ellipsis">
      ¿Qué es JpaRepository?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-dto" class="md-nav__link">
    <span class="md-ellipsis">
      Creacion DTO
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creacion DTO">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-crear-el-dto" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Crear el DTO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-validacion-del-dto" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 2: Validación del DTO
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-servicio" class="md-nav__link">
    <span class="md-ellipsis">
      Creacion Servicio
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creacion Servicio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-crear-las-dependencias-necesarias" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Crear las Dependencias Necesarias
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-creacion-de-bookmapper" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 2: Creacion de BookMapper
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-3-crear-la-clase-del-servicio" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 3: Crear la Clase del Servicio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-paginacion" class="md-nav__link">
    <span class="md-ellipsis">
      Creacion Paginación
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-controlador" class="md-nav__link">
    <span class="md-ellipsis">
      Creación Controlador
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creación Controlador">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#descripcion-del-controlador" class="md-nav__link">
    <span class="md-ellipsis">
      Descripción del Controlador
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-1-creacion-de-la-clase-bookcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1: Creación de la Clase BookController
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adicionar-configuracion-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Adicionar configuracion Properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adicionar-flyway" class="md-nav__link">
    <span class="md-ellipsis">
      Adicionar flyway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probar-el-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      Probar el Endpoint
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Probar el Endpoint">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#probando-el-endpoint-general" class="md-nav__link">
    <span class="md-ellipsis">
      Probando el Endpoint General
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probando-el-endpoint-por-codigo-de-libro" class="md-nav__link">
    <span class="md-ellipsis">
      Probando el Endpoint por Código de Libro
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manejo-de-errores-para-codigos-no-existentes" class="md-nav__link">
    <span class="md-ellipsis">
      Manejo de Errores para Códigos No Existentes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corrigiendo-el-manejo-de-errores" class="md-nav__link">
    <span class="md-ellipsis">
      Corrigiendo el Manejo de Errores
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manejo-de-excepciones-de-la-api" class="md-nav__link">
    <span class="md-ellipsis">
      Manejo de Excepciones de la API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Manejo de Excepciones de la API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#excepcion-personalizada-booknotfoundexception" class="md-nav__link">
    <span class="md-ellipsis">
      Excepción Personalizada BookNotFoundException
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementacion-excepciones-de-la-api" class="md-nav__link">
    <span class="md-ellipsis">
      Implementación Excepciones de la API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manejando-excepciones-de-forma-global" class="md-nav__link">
    <span class="md-ellipsis">
      Manejando Excepciones de Forma Global
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementacion-excepciones-de-forma-global" class="md-nav__link">
    <span class="md-ellipsis">
      Implementación Excepciones de Forma Global
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementando-las-excepciones-en-el-servicio" class="md-nav__link">
    <span class="md-ellipsis">
      Implementando las Excepciones en el Servicio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enlace-a-codigo-http" class="md-nav__link">
    <span class="md-ellipsis">
      Enlace a Código HTTP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subida-de-archivos" class="md-nav__link">
    <span class="md-ellipsis">
      Subida de Archivos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Subida de Archivos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crear-la-clase-filesystemstorageservice" class="md-nav__link">
    <span class="md-ellipsis">
      Crear la clase FileSystemStorageService
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#excepcion-personalizada-resourcenotfoundexception" class="md-nav__link">
    <span class="md-ellipsis">
      Excepción Personalizada ResourceNotFoundException
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Excepción Personalizada ResourceNotFoundException">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implementacion-de-resourcenotfoundexception" class="md-nav__link">
    <span class="md-ellipsis">
      Implementación de ResourceNotFoundException
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#descripcion-de-la-implementacion" class="md-nav__link">
    <span class="md-ellipsis">
      Descripción de la Implementación
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controlador-para-la-subida-y-recuperacion-de-archivos" class="md-nav__link">
    <span class="md-ellipsis">
      Controlador para la Subida y Recuperación de Archivos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Controlador para la Subida y Recuperación de Archivos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crear-la-clase-filecontroller" class="md-nav__link">
    <span class="md-ellipsis">
      Crear la Clase FileController
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probar-endpoint-subir-archivo" class="md-nav__link">
    <span class="md-ellipsis">
      Probar Endpoint Subir Archivo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Probar Endpoint Subir Archivo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problema-inicial" class="md-nav__link">
    <span class="md-ellipsis">
      Problema Inicial
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagnostico-del-problema" class="md-nav__link">
    <span class="md-ellipsis">
      Diagnóstico del Problema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solucion" class="md-nav__link">
    <span class="md-ellipsis">
      Solución
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#incrementar-el-tamano-maximo-de-los-archivos-subidos" class="md-nav__link">
    <span class="md-ellipsis">
      Incrementar el Tamaño Máximo de los Archivos Subidos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Incrementar el Tamaño Máximo de los Archivos Subidos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resultado-final" class="md-nav__link">
    <span class="md-ellipsis">
      Resultado Final
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prueba-del-endpoint-post" class="md-nav__link">
    <span class="md-ellipsis">
      Prueba del Endpoint POST
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prueba-del-endpoint-get" class="md-nav__link">
    <span class="md-ellipsis">
      Prueba del Endpoint GET
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conlusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conlusión
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="crear-proyecto-de-spring"><strong>Crear Proyecto de Spring</strong></h1>
<p>Para empezar, accedemos a <a href="https://start.spring.io/">Spring initialzr</a> y configuramos el proyecto de la siguiente manera:</p>
<ul>
<li><strong>Project:</strong> Maven</li>
<li><strong>Language:</strong> Java</li>
<li><strong>Spring Boot:</strong> 3.+ (la última versión estable)</li>
<li><strong>Project Metadata:</strong><ul>
<li><strong>Group:</strong> com.geovannycodfigue</li>
<li><strong>Artifact:</strong> bookstore</li>
<li><strong>Name:</strong> bookstore</li>
</ul>
</li>
<li><strong>Packaging:</strong> Jar</li>
<li><strong>Java:</strong> 21</li>
</ul>
<h2 id="adicionar-dependencias"><strong>Adicionar Dependencias</strong></h2>
<p>Agregamos las siguientes dependencias en el archivo <code>pom.xml</code>:</p>
<p><img alt="GeoLabs BookStore" src="../files/figura1.png" title="GeoLabs BookStore" /></p>
<h3 id="dependencias"><strong>Dependencias:</strong></h3>
<div class="language-xml highlight"><span class="filename">pom.xml</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">      </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">      </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-jpa<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">      </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">      </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-validation<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">      </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">      </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">      </span><span class="nt">&lt;groupId&gt;</span>org.flywaydb<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">      </span><span class="nt">&lt;artifactId&gt;</span>flyway-core<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">      </span><span class="nt">&lt;groupId&gt;</span>org.flywaydb<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">      </span><span class="nt">&lt;artifactId&gt;</span>flyway-database-postgresql<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="w">      </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="w">      </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-devtools<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">      </span><span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="w">      </span><span class="nt">&lt;optional&gt;</span>true<span class="nt">&lt;/optional&gt;</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="w">      </span><span class="nt">&lt;groupId&gt;</span>org.postgresql<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="w">      </span><span class="nt">&lt;artifactId&gt;</span>postgresql<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="w">      </span><span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="w">      </span><span class="nt">&lt;groupId&gt;</span>org.projectlombok<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="w">      </span><span class="nt">&lt;artifactId&gt;</span>lombok<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="w">      </span><span class="nt">&lt;optional&gt;</span>true<span class="nt">&lt;/optional&gt;</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a><span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
</span></code></pre></div>
<p>Una vez configurado el proyecto y añadidas las dependencias, generamos el proyecto y descargamos el archivo <strong>.zip</strong>. Lo descomprimimos y abrimos el proyecto en el IDE IntelliJ IDEA.</p>
<h2 id="creacion-docker-componse"><strong>Creación Docker Componse</strong></h2>
<h3 id="configuracion-del-entorno-de-desarrollo-con-docker-compose"><strong>Configuración del Entorno de Desarrollo con Docker Compose</strong></h3>
<p>Para configurar el entorno de desarrollo, vamos a crear un archivo llamado <code>dev-stack.yml</code> que definirá los servicios necesarios utilizando Docker Compose. En este ejemplo, configuraremos un contenedor para PostgreSQL.</p>
<div class="language-yaml highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">dev-stack.yml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span>
<span class="normal"><a href="#__codelineno-1-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;bookstore&#39;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">  </span><span class="nt">bookstore-db</span><span class="p">:</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres:16-alpine</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bookstore-db</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">POSTGRES_USER=postgres</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">POSTGRES_PASSWORD=postgres</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">POSTGRES_DB=postgres</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;15432:5432&quot;</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">    </span><span class="nt">healthcheck</span><span class="p">:</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">      </span><span class="nt">test</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="s">&quot;CMD-SHELL&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;pg_isready</span><span class="nv"> </span><span class="s">-U</span><span class="nv"> </span><span class="s">postgres&quot;</span><span class="w"> </span><span class="p p-Indicator">]</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5s</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="w">      </span><span class="nt">retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="w">      </span><span class="nt">resources</span><span class="p">:</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="w">        </span><span class="nt">limits</span><span class="p">:</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="w">          </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500m</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li><strong>Línea 1</strong>: <code>name: 'bookstore'</code> Define el nombre del proyecto Docker Compose. Este nombre se usa para agrupar todos los servicios definidos en el archivo bajo un mismo proyecto.</li>
<li><strong>Línea 2</strong>: <code>services</code> Aquí se definen los servicios que se utilizarán en el entorno de desarrollo. En este caso, solo tenemos un servicio llamado bookstore-db.</li>
<li><strong>Línea 4</strong>: <code>image: postgres:16-alpine</code> Especifica la imagen de Docker que se utilizará para el contenedor de la base de datos PostgreSQL. En este caso, estamos usando la imagen postgres:16-alpine, que es una versión ligera de PostgreSQL.</li>
<li><strong>Línea 5</strong>: <strong>container_name</strong>: <code>bookstore-db</code> Define el nombre del contenedor.</li>
<li><strong>Línea 6-9</strong>: <strong>environment</strong>: Aquí se definen las variables de entorno necesarias para configurar PostgreSQL.<ul>
<li><strong>POSTGRES_USER=postgres</strong>: El nombre de usuario de PostgreSQL.</li>
<li><strong>POSTGRES_PASSWORD=postgres</strong>: La contraseña del usuario de PostgreSQL.</li>
<li><strong>POSTGRES_DB=postgres</strong>: El nombre de la base de datos por defecto.</li>
</ul>
</li>
<li><strong>Línea 10-11</strong>: <code>ports</code> Mapea el puerto 5432 del contenedor al puerto 15432 en el host. Esto permite acceder a PostgreSQL en el puerto 15432 de tu máquina local.</li>
<li><strong>Línea 12-16</strong>: <code>healthcheck</code> Define un chequeo de salud para el contenedor.<ul>
<li><code>test: [ "CMD-SHELL", "pg_isready -U postgres" ]</code>: Comando que se ejecutará para verificar si la base de datos está lista.</li>
<li><code>interval: 10s:</code> Intervalo de tiempo entre cada chequeo.</li>
<li><code>timeout: 5s:</code> Tiempo máximo que se espera una respuesta antes de considerar el chequeo como fallido.</li>
<li><code>retries: 5:</code> Número de intentos de chequeo fallidos antes de marcar el contenedor como no saludable.</li>
</ul>
</li>
<li><strong>Línea 17-20</strong>: <code>deploy:</code> Configuraciones de despliegue.<ul>
<li><code>resources:</code> Limita los recursos del contenedor.</li>
<li><code>limits:</code> Limita la cantidad de memoria que puede usar el contenedor.</li>
<li><code>memory:</code> 500m: Límite de memoria establecido en 500MB.</li>
</ul>
</li>
</ul>
<p>Comandos para gestionar Docker Compose
Para iniciar y detener la base de datos con Docker Compose, utilizamos los siguientes comandos:</p>
<p><strong>Subir la base de datos</strong></p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>docker<span class="w"> </span>compose<span class="w"> </span>-f<span class="w"> </span>dev-stack.yml<span class="w"> </span>up<span class="w"> </span>-d
</span></code></pre></div>
<p>Este comando levanta los servicios definidos en <code>dev-stack.yml</code> en modo detached (en segundo plano). La base de datos <code>PostgreSQL</code> se iniciará y estará disponible en el puerto <code>15432</code> de tu máquina local.</p>
<p><strong>Detener la base de datos</strong></p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>docker<span class="w"> </span>compose<span class="w"> </span>-f<span class="w"> </span>dev-stack.yml<span class="w"> </span>down
</span></code></pre></div>
<p>Este comando detiene y elimina los contenedores, redes y volúmenes definidos en dev-stack.yml.</p>
<h2 id="creacion-crud"><strong>Creacion CRUD</strong></h2>
<h3 id="creacion-entidad"><strong>Creacion Entidad</strong></h3>
<p>Primero, creamos los paquetes necesarios en el proyecto para organizar nuestro código de manera clara y estructurada. Los paquetes que necesitamos son:</p>
<ul>
<li><code>model</code></li>
<li><code>repository</code></li>
<li><code>service</code></li>
<li><code>controller</code></li>
<li><code>dto</code></li>
<li><code>mapper</code></li>
</ul>
<h4 id="paso-1-crear-la-clase-bookentity"><strong>Paso 1:</strong> Crear la clase <code>BookEntity</code></h4>
<p>Dentro del paquete <code>model</code>, creamos una clase llamada <code>BookEntity</code> con los siguientes campos: <code>id</code>, <code>code</code>, <code>name</code>, <code>description</code>, <code>price</code>, <code>imageUrl</code>, <code>filePath</code>, <code>createdAt</code>, y <code>updatedAt</code>.</p>
<div class="language-java highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BookEntity.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span>
<span class="normal"><a href="#__codelineno-4-20">20</a></span>
<span class="normal"><a href="#__codelineno-4-21">21</a></span>
<span class="normal"><a href="#__codelineno-4-22">22</a></span>
<span class="normal"><a href="#__codelineno-4-23">23</a></span>
<span class="normal"><a href="#__codelineno-4-24">24</a></span>
<span class="normal"><a href="#__codelineno-4-25">25</a></span>
<span class="normal"><a href="#__codelineno-4-26">26</a></span>
<span class="normal"><a href="#__codelineno-4-27">27</a></span>
<span class="normal"><a href="#__codelineno-4-28">28</a></span>
<span class="normal"><a href="#__codelineno-4-29">29</a></span>
<span class="normal"><a href="#__codelineno-4-30">30</a></span>
<span class="normal"><a href="#__codelineno-4-31">31</a></span>
<span class="normal"><a href="#__codelineno-4-32">32</a></span>
<span class="normal"><a href="#__codelineno-4-33">33</a></span>
<span class="normal"><a href="#__codelineno-4-34">34</a></span>
<span class="normal"><a href="#__codelineno-4-35">35</a></span>
<span class="normal"><a href="#__codelineno-4-36">36</a></span>
<span class="normal"><a href="#__codelineno-4-37">37</a></span>
<span class="normal"><a href="#__codelineno-4-38">38</a></span>
<span class="normal"><a href="#__codelineno-4-39">39</a></span>
<span class="normal"><a href="#__codelineno-4-40">40</a></span>
<span class="normal"><a href="#__codelineno-4-41">41</a></span>
<span class="normal"><a href="#__codelineno-4-42">42</a></span>
<span class="normal"><a href="#__codelineno-4-43">43</a></span>
<span class="normal"><a href="#__codelineno-4-44">44</a></span>
<span class="normal"><a href="#__codelineno-4-45">45</a></span>
<span class="normal"><a href="#__codelineno-4-46">46</a></span>
<span class="normal"><a href="#__codelineno-4-47">47</a></span>
<span class="normal"><a href="#__codelineno-4-48">48</a></span>
<span class="normal"><a href="#__codelineno-4-49">49</a></span>
<span class="normal"><a href="#__codelineno-4-50">50</a></span>
<span class="normal"><a href="#__codelineno-4-51">51</a></span>
<span class="normal"><a href="#__codelineno-4-52">52</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.model</span><span class="p">;</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.persistence.Column</span><span class="p">;</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.persistence.Entity</span><span class="p">;</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.persistence.GeneratedValue</span><span class="p">;</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.persistence.GenerationType</span><span class="p">;</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.persistence.Id</span><span class="p">;</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.persistence.SequenceGenerator</span><span class="p">;</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.persistence.Table</span><span class="p">;</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.time.LocalDateTime</span><span class="p">;</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="kn">import</span><span class="w"> </span><span class="nn">lombok.AllArgsConstructor</span><span class="p">;</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Getter</span><span class="p">;</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="kn">import</span><span class="w"> </span><span class="nn">lombok.NoArgsConstructor</span><span class="p">;</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Setter</span><span class="p">;</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16"></a>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="nd">@Entity</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="nd">@Table</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;books&quot;</span><span class="p">)</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="nd">@Getter</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="nd">@Setter</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="nd">@AllArgsConstructor</span>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="nd">@NoArgsConstructor</span>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookEntity</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24"></a>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25"></a><span class="w">    </span><span class="nd">@Id</span>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26"></a><span class="w">    </span><span class="nd">@GeneratedValue</span><span class="p">(</span><span class="n">strategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenerationType</span><span class="p">.</span><span class="na">SEQUENCE</span><span class="p">,</span><span class="w"> </span><span class="n">generator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;book_id_generator&quot;</span><span class="p">)</span>
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27"></a><span class="w">    </span><span class="nd">@SequenceGenerator</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;book_id_generator&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sequenceName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;book_id_seq&quot;</span><span class="p">)</span>
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29"></a>
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30"></a><span class="w">    </span><span class="nd">@Column</span><span class="p">(</span><span class="n">nullable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">;</span>
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32"></a>
</span><span id="__span-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33"></a><span class="w">    </span><span class="nd">@Column</span><span class="p">(</span><span class="n">nullable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
</span><span id="__span-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span><span id="__span-4-35"><a id="__codelineno-4-35" name="__codelineno-4-35"></a>
</span><span id="__span-4-36"><a id="__codelineno-4-36" name="__codelineno-4-36"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">description</span><span class="p">;</span>
</span><span id="__span-4-37"><a id="__codelineno-4-37" name="__codelineno-4-37"></a>
</span><span id="__span-4-38"><a id="__codelineno-4-38" name="__codelineno-4-38"></a><span class="w">    </span><span class="nd">@Column</span><span class="p">(</span><span class="n">nullable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
</span><span id="__span-4-39"><a id="__codelineno-4-39" name="__codelineno-4-39"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">price</span><span class="p">;</span>
</span><span id="__span-4-40"><a id="__codelineno-4-40" name="__codelineno-4-40"></a>
</span><span id="__span-4-41"><a id="__codelineno-4-41" name="__codelineno-4-41"></a><span class="w">    </span><span class="nd">@Column</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;image_url&quot;</span><span class="p">)</span>
</span><span id="__span-4-42"><a id="__codelineno-4-42" name="__codelineno-4-42"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">imageUrl</span><span class="p">;</span>
</span><span id="__span-4-43"><a id="__codelineno-4-43" name="__codelineno-4-43"></a>
</span><span id="__span-4-44"><a id="__codelineno-4-44" name="__codelineno-4-44"></a><span class="w">    </span><span class="nd">@Column</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;file_path&quot;</span><span class="p">)</span>
</span><span id="__span-4-45"><a id="__codelineno-4-45" name="__codelineno-4-45"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">filePath</span><span class="p">;</span>
</span><span id="__span-4-46"><a id="__codelineno-4-46" name="__codelineno-4-46"></a>
</span><span id="__span-4-47"><a id="__codelineno-4-47" name="__codelineno-4-47"></a><span class="w">    </span><span class="nd">@Column</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;created&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">nullable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="n">updatable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
</span><span id="__span-4-48"><a id="__codelineno-4-48" name="__codelineno-4-48"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
</span><span id="__span-4-49"><a id="__codelineno-4-49" name="__codelineno-4-49"></a>
</span><span id="__span-4-50"><a id="__codelineno-4-50" name="__codelineno-4-50"></a><span class="w">    </span><span class="nd">@Column</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;modified&quot;</span><span class="p">)</span>
</span><span id="__span-4-51"><a id="__codelineno-4-51" name="__codelineno-4-51"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>
</span><span id="__span-4-52"><a id="__codelineno-4-52" name="__codelineno-4-52"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li><strong>Línea 17</strong>: <code>@Entity</code> Indica que esta clase es una entidad de JPA.</li>
<li><strong>Línea 18</strong>: <code>@Table(name = "books")</code> Especifica la tabla de base de datos con la que se mapeará esta entidad.</li>
<li><strong>Líneas 19-22</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nd">@Getter</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nd">@Setter</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="nd">@AllArgsConstructor</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="nd">@NoArgsConstructor</span>
</span></code></pre></div>
<ul>
<li>
<p><strong>Anotaciones de Lombok</strong>:</p>
<ul>
<li><strong>@Getter</strong>: Genera automáticamente los métodos getter para todos los campos.</li>
<li><strong>@Setter</strong>: Genera automáticamente los métodos setter para todos los campos.</li>
<li><strong>@AllArgsConstructor</strong>: Genera un constructor con un argumento para cada campo en la clase.</li>
<li><strong>@NoArgsConstructor</strong>: Genera un constructor sin argumentos.</li>
</ul>
</li>
<li>
<p><strong>Líneas 25-27</strong>:</p>
</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nd">@Id</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="nd">@GeneratedValue</span><span class="p">(</span><span class="n">strategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenerationType</span><span class="p">.</span><span class="na">SEQUENCE</span><span class="p">,</span><span class="w"> </span><span class="n">generator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;book_id_generator&quot;</span><span class="p">)</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="nd">@SequenceGenerator</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;book_id_generator&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sequenceName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;book_id_seq&quot;</span><span class="p">)</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="kd">private</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
</span></code></pre></div>
<p>Configura el campo <code>id</code> como la clave primaria.</p>
<ul>
<li><strong>@Id</strong>: Define el campo id como la clave primaria.</li>
<li><strong>@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "book_id_generator")</strong>: Especifica que el valor de este campo se generará automáticamente usando una secuencia.</li>
<li>
<p><strong>@SequenceGenerator(name = "book_id_generator", sequenceName = "book_id_seq")</strong>: Define el generador de secuencia para la clave primaria.</p>
</li>
<li>
<p><strong>Líneas 30-31</strong>:</p>
</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nd">@Column</span><span class="p">(</span><span class="n">nullable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">;</span>
</span></code></pre></div>
<p>Configura el campo <code>code</code> como una columna no nula y única.</p>
<ul>
<li><strong>Líneas 33-34</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nd">@Column</span><span class="p">(</span><span class="n">nullable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
</span></code></pre></div>
<p>Configura el campo <code>name</code> como una columna no nula.</p>
<ul>
<li><strong>Líneas 38-39</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nd">@Column</span><span class="p">(</span><span class="n">nullable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="kd">private</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">price</span><span class="p">;</span>
</span></code></pre></div>
<p>Configura el campo <code>price</code> como una columna no nula.</p>
<ul>
<li>
<p><strong>Nota</strong>: En Java, <code>BigDecimal</code> es recomendado sobre <code>double</code> o <code>float</code> para representar valores numéricos de precisión arbitraria, especialmente en aplicaciones que requieren una alta precisión en cálculos numéricos, como es el caso de aplicaciones financieras y de comercio electrónico. Acá te explico las razones principales:</p>
<ul>
<li>Con <code>BigDecimal</code>, puedes realizar operaciones aritméticas (suma, resta, multiplicación, división) con precisión garantizada. En double y float, las operaciones aritméticas pueden resultar en pérdida de precisión debido a la naturaleza del almacenamiento en punto flotante.</li>
<li>En aplicaciones financieras, los valores monetarios deben ser exactos. Un error de redondeo puede tener consecuencias significativas en cálculos de intereses, balances, precios, etc.</li>
<li><code>BigDecimal</code> es la elección natural para estos contextos debido a su capacidad para manejar valores precisos y realizar cálculos sin errores de redondeo.</li>
</ul>
</li>
<li>
<p><strong>Línea 41-42</strong>:</p>
</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nd">@Column</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;image_url&quot;</span><span class="p">)</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">imageUrl</span><span class="p">;</span>
</span></code></pre></div>
<p>Configura el campo <code>imageUrl</code> como una columna opcional con un nombre específico en la base de datos.</p>
<ul>
<li><strong>Línea 44-45</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nd">@Column</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;file_path&quot;</span><span class="p">)</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">filePath</span><span class="p">;</span>
</span></code></pre></div>
<p>Configura el campo <code>filePath</code> como una columna opcional con un nombre específico en la base de datos.</p>
<ul>
<li><strong>Líneas 47-48</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nd">@Column</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;created&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">nullable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="n">updatable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">createdAt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">.</span><span class="na">now</span><span class="p">();</span>
</span></code></pre></div>
<p>Configura el campo <code>createdAt</code> como una columna no nula que no se puede actualizar, inicializada con la fecha y hora actual.</p>
<ul>
<li><strong>Líneas 50-51</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nd">@Column</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;modified&quot;</span><span class="p">)</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="kd">private</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">updatedAt</span><span class="p">;</span>
</span></code></pre></div>
<p>Configura el campo <code>updatedAt</code> como una columna opcional con un nombre específico en la base de datos.</p>
<h4 id="paso-2-validacion-de-la-entidad"><strong>Paso 2: Validación de la Entidad</strong></h4>
<p>Para validar el modelo <code>BookEntity</code>, se ha añadido la siguiente anotacion de validación:</p>
<ul>
<li><strong>@Column</strong>: Especifica que el campo es una columna en la base de datos.</li>
</ul>
<p>Con esta configuración, la clase <code>BookEntity</code> está lista para ser utilizada como una entidad de base de datos en tu aplicación Spring Boot.</p>
<h3 id="creacion-repositorio"><strong>Creacion Repositorio</strong></h3>
<h4 id="paso-1-crear-el-repositorio-para-la-entidad-bookentity"><strong>Paso 1: Crear el Repositorio para la Entidad <code>BookEntity</code></strong></h4>
<p>Dentro del paquete <code>repository</code>, creamos una interfaz llamada <code>BookRepository</code> que hereda de <code>JpaRepository&lt;BookEntity, Long&gt;</code>. Añadimos un método personalizado para encontrar un libro por su código.</p>
<div class="language-java highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BookRepository.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span>
<span class="normal"><a href="#__codelineno-14-4">4</a></span>
<span class="normal"><a href="#__codelineno-14-5">5</a></span>
<span class="normal"><a href="#__codelineno-14-6">6</a></span>
<span class="normal"><a href="#__codelineno-14-7">7</a></span>
<span class="normal"><a href="#__codelineno-14-8">8</a></span>
<span class="normal"><a href="#__codelineno-14-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.repository</span><span class="p">;</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2"></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.model.BookEntity</span><span class="p">;</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Optional</span><span class="p">;</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.data.jpa.repository.JpaRepository</span><span class="p">;</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6"></a>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">BookRepository</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">JpaRepository</span><span class="o">&lt;</span><span class="n">BookEntity</span><span class="p">,</span><span class="w"> </span><span class="n">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">    </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">BookEntity</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByCode</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">);</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li><strong>Línea 5</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.data.jpa.repository.JpaRepository</span><span class="p">;</span>
</span></code></pre></div>
<p>Importa la interfaz JpaRepository de Spring Data JPA.</p>
<ul>
<li><strong>Línea 7</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">BookRepository</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">JpaRepository</span><span class="o">&lt;</span><span class="n">BookEntity</span><span class="p">,</span><span class="w"> </span><span class="n">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span></code></pre></div>
<p>Define la interfaz <code>BookRepository</code> que hereda de <code>JpaRepository</code> para proporcionar operaciones CRUD.</p>
<ul>
<li><strong>Línea 8</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">Optional</span><span class="o">&lt;</span><span class="n">BookEntity</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByCode</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">);</span>
</span></code></pre></div>
<p>Declara un método personalizado para encontrar un libro por su código.</p>
<h4 id="que-es-jparepository"><strong>¿Qué es JpaRepository?</strong></h4>
<p><code>JpaRepository</code> es una interfaz de Spring Data JPA que extiende <code>CrudRepository</code> y <code>PagingAndSortingRepository</code>. Proporciona métodos adicionales para trabajar con la persistencia de datos de una manera más avanzada y eficiente.</p>
<p><strong>Diferencias entre JpaRepository y CrudRepository:</strong></p>
<ul>
<li><strong>CrudRepository</strong>: Proporciona métodos CRUD básicos como <code>save</code>, <code>findAll</code>, <code>findById</code>, y <code>delete</code>.</li>
<li><strong>JpaRepository</strong>: Además de los métodos proporcionados por <code>CrudRepository</code>, incluye métodos adicionales para paginación y ordenación, como <code>findAll(Pageable pageable)</code> y <code>findAll(Sort sort)</code>. También tiene métodos para operaciones en batch y otros más avanzados.</li>
</ul>
<p><strong>Métodos Personalizados</strong>
En algunos casos, necesitamos métodos que no están disponibles por defecto en <code>JpaRepository</code>. Para esto, podemos definir métodos personalizados en nuestro repositorio.</p>
<p><strong>Ejemplo de Método Personalizado</strong>:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">Optional</span><span class="o">&lt;</span><span class="n">BookEntity</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByCode</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">);</span>
</span></code></pre></div>
<p>Este método personalizado utiliza la convención de nomenclatura de Spring Data JPA para generar automáticamente la consulta SQL.</p>
<p><strong>Uso de JPQL para Consultas Personalizadas</strong></p>
<p>JPQL (Java Persistence Query Language) es una poderosa herramienta para escribir consultas personalizadas en Spring Data JPA. Podemos definir consultas utilizando la anotación <code>@Query</code>.</p>
<p><strong>Ejemplo de Uso de JPQL</strong>:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.data.jpa.repository.Query</span><span class="p">;</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;SELECT b FROM BookEntity b WHERE b.code = :code&quot;</span><span class="p">)</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="n">Optional</span><span class="o">&lt;</span><span class="n">BookEntity</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">findByCodeJPQL</span><span class="p">(</span><span class="nd">@Param</span><span class="p">(</span><span class="s">&quot;code&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">);</span>
</span></code></pre></div>
<p>Esta consulta personalizada selecciona un <code>BookEntity</code> basado en el código utilizando JPQL.</p>
<h3 id="creacion-dto"><strong>Creacion DTO</strong></h3>
<p><strong>¿Qué es un Record en Java?</strong>
Un record es una nueva clase en Java introducida en la <code>versión 14</code> como una característica preliminar y estabilizada en la <code>versión 16</code>. Los records están diseñados para ser clases inmutables que se utilizan principalmente para contener datos. Proveen una manera concisa de declarar clases de datos, eliminando gran parte del código repetitivo.</p>
<p><strong>Características de los Records</strong>:</p>
<ul>
<li><strong>Inmutabilidad</strong>: Los campos de un record son finales por defecto. Esto significa que no se pueden cambiar una vez que se establece su valor. Es decir, una vez que se crea un objeto de record con ciertos valores, esos valores no pueden ser modificados. Esto ayuda a mantener la integridad de los datos y evita errores asociados con cambios inesperados.</li>
<li><strong>Concisión</strong>: Se generan automáticamente métodos como <code>equals</code>, <code>hashCode</code>, y <code>toString</code>. Esto reduce la cantidad de código que el desarrollador necesita escribir, ya que estas implementaciones suelen ser estándar y repetitivas.</li>
<li><strong>Utilidad</strong>: Facilitan la creación de clases de datos con menos código. Los records son especialmente útiles para definir objetos simples que solo contienen datos, sin lógica adicional.</li>
</ul>
<h4 id="paso-1-crear-el-dto"><strong>Paso 1: Crear el DTO</strong></h4>
<ul>
<li>Dentro del paquete <code>dto</code>, creamos un <code>record</code> Java llamado <code>Book</code> con los campos <code>id</code>, <code>code</code>, <code>name</code>, <code>description</code>, <code>price</code>, <code>imageUrl</code>, y <code>filePath</code> de la entidad <code>BookEntity</code>. Añadimos validaciones a estos campos.</li>
</ul>
<div class="language-java highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Book.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-20-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-20-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span>
<span class="normal"><a href="#__codelineno-20-11">11</a></span>
<span class="normal"><a href="#__codelineno-20-12">12</a></span>
<span class="normal"><a href="#__codelineno-20-13">13</a></span>
<span class="normal"><a href="#__codelineno-20-14">14</a></span>
<span class="normal"><a href="#__codelineno-20-15">15</a></span>
<span class="normal"><a href="#__codelineno-20-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.dto</span><span class="p">;</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2"></a>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.validation.constraints.DecimalMin</span><span class="p">;</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.validation.constraints.NotBlank</span><span class="p">;</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.validation.constraints.NotEmpty</span><span class="p">;</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">jakarta.validation.constraints.NotNull</span><span class="p">;</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.math.BigDecimal</span><span class="p">;</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8"></a>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">Book</span><span class="p">(</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="p">,</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="w">        </span><span class="nd">@NotEmpty</span><span class="p">(</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Book code is required&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">,</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="w">        </span><span class="nd">@NotEmpty</span><span class="p">(</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Book name is required&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">description</span><span class="p">,</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14"></a><span class="w">        </span><span class="nd">@NotNull</span><span class="p">(</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Book price is required&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@DecimalMin</span><span class="p">(</span><span class="s">&quot;0.1&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">price</span><span class="p">,</span>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15"></a><span class="w">        </span><span class="nd">@NotBlank</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">imageUrl</span><span class="p">,</span>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16"></a><span class="w">        </span><span class="nd">@NotBlank</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">filePath</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li><strong>Línea 9</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">Book</span><span class="p">(</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="n">Define</span><span class="w"> </span><span class="n">el</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="n">Book</span><span class="w"> </span><span class="n">que</span><span class="w"> </span><span class="n">encapsula</span><span class="w"> </span><span class="n">los</span><span class="w"> </span><span class="n">datos</span><span class="w"> </span><span class="n">del</span><span class="w"> </span><span class="n">libro</span><span class="p">.</span>
</span></code></pre></div>
<ul>
<li><strong>Línea 11</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nd">@NotEmpty</span><span class="p">(</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Book code is required&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">,</span>
</span></code></pre></div>
<p>Define el campo <code>code</code> y añade la validación <code>@NotEmpty</code>.</p>
<ul>
<li><strong>Línea 14</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nd">@NotNull</span><span class="p">(</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Book price is required&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@DecimalMin</span><span class="p">(</span><span class="s">&quot;0.1&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">price</span><span class="p">,</span>
</span></code></pre></div>
<p>Define el campo <code>price</code> y añade las validaciones <code>@NotNull</code> y <code>@DecimalMin</code>.</p>
<ul>
<li><strong>Línea 15</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nd">@NotBlank</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">imageUrl</span><span class="p">,</span>
</span></code></pre></div>
<p>Define el campo <code>imageUrl</code> y añade la validación <code>@NotBlank</code>.</p>
<h4 id="paso-2-validacion-del-dto"><strong>Paso 2: Validación del DTO</strong></h4>
<p>Para validar el modelo <code>Book</code>, se han añadido las siguientes anotaciones de validación:</p>
<ul>
<li><strong>@NotEmpty</strong>: Asegura que el campo no esté vacío. Se utiliza principalmente en campos de texto para asegurarse de que no sean nulos y que contengan al menos un carácter, excluyendo los espacios en blanco. Se aplica a los campos <code>code</code> y <code>name</code>.</li>
</ul>
<p><strong>Ejemplo</strong>:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nd">@NotEmpty</span><span class="p">(</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Book code is required&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">,</span>
</span></code></pre></div>
<p>Valida que el campo <code>code</code> no esté vacío.</p>
<ul>
<li><strong>@NotNull</strong>: Asegura que el campo no sea nulo. Es útil para cualquier tipo de dato, asegurándose de que el campo debe tener un valor asignado. Se aplica al campo <code>price</code>.</li>
</ul>
<p><strong>Ejemplo</strong>:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="nd">@NotNull</span><span class="p">(</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Book price is required&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@DecimalMin</span><span class="p">(</span><span class="s">&quot;0.1&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="n">price</span><span class="p">,</span>
</span></code></pre></div>
<p>Valida que el campo <code>price</code> no sea nulo.</p>
<ul>
<li><strong>@DecimalMin</strong>: Valida que el campo tenga un valor mínimo específico. Se utiliza en campos numéricos para asegurar que el valor sea igual o mayor que el valor especificado. Se aplica al campo <code>price</code>.</li>
</ul>
<p><strong>Ejemplo</strong>:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="nd">@DecimalMin</span><span class="p">(</span><span class="s">&quot;0.1&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">BigDecimal</span><span class="w"> </span><span class="n">price</span><span class="p">,</span>
</span></code></pre></div>
<p>Valida que el campo <code>price</code> sea mayor o igual a 0.1.</p>
<ul>
<li><strong>@NotBlank</strong>: Asegura que el campo no esté vacío y que no sea solo espacios en blanco. Es útil para campos de texto donde no solo se necesita que el campo no sea nulo, sino que también contenga caracteres no espaciales. Se aplica a los campos <code>imageUrl</code> y <code>filePath</code>.</li>
</ul>
<p><strong>Ejemplo</strong>:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="nd">@NotBlank</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">imageUrl</span><span class="p">,</span>
</span></code></pre></div>
<p>Valida que el campo <code>imageUrl</code> no esté vacío y no contenga solo espacios en blanco.
Con esta configuración, tanto la clase <code>BookEntity</code> como el DTO <code>Book</code> están listos para ser utilizados en tu aplicación Spring Boot.</p>
<h3 id="creacion-servicio"><strong>Creacion Servicio</strong></h3>
<h4 id="paso-1-crear-las-dependencias-necesarias"><strong>Paso 1: Crear las Dependencias Necesarias</strong></h4>
<p><strong>Creación de <code>ApplicationProperties</code></strong></p>
<p>Dentro del paquete <code>config</code>, creamos un <code>record</code> Java llamado <code>ApplicationProperties</code> que encapsula las propiedades de configuración de la aplicación.</p>
<div class="language-java highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">ApplicationProperties.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1">1</a></span>
<span class="normal"><a href="#__codelineno-29-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="nd">@ConfigurationProperties</span><span class="p">(</span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;book&quot;</span><span class="p">)</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">ApplicationProperties</span><span class="p">(</span><span class="nd">@DefaultValue</span><span class="p">(</span><span class="s">&quot;10&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@Min</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pageSize</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li><strong>Línea 1</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nd">@ConfigurationProperties</span><span class="p">(</span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;book&quot;</span><span class="p">)</span>
</span></code></pre></div>
<ul>
<li>
<p>Esta anotación indica que las propiedades de configuración de este <code>record</code> estarán prefijadas con <code>book</code> en el archivo <code>application.properties</code> o <code>application.yml</code>. </p>
<ul>
<li>Por ejemplo:<ul>
<li><code>book.pageSize=10</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Líneas 2</strong>:</p>
</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">ApplicationProperties</span><span class="p">(</span><span class="nd">@DefaultValue</span><span class="p">(</span><span class="s">&quot;10&quot;</span><span class="p">)</span><span class="w"> </span><span class="nd">@Min</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pageSize</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</span></code></pre></div>
<p>Define el <code>record</code> <code>ApplicationProperties</code> que encapsula las propiedades de configuración. El campo <code>pageSize</code> asegura que el tamaño de página mínimo sea 1 y tiene un valor predeterminado de 10.</p>
<p><strong>Anotación en la Clase Principal</strong></p>
<p>Para habilitar el escaneo y la configuración automática de las propiedades, añadimos la anotación <code>@ConfigurationPropertiesScan</code> en la clase principal <code>BookstoreApplication</code>.</p>
<div class="language-java highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BookstoreApplication.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-32-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-32-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-32-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-32-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-32-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-32-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-32-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-32-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-32-10">10</a></span>
<span class="normal"><a href="#__codelineno-32-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.context.properties.ConfigurationPropertiesScan</span><span class="p">;</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.SpringApplication</span><span class="p">;</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="p">;</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4"></a>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="nd">@SpringBootApplication</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="nd">@ConfigurationPropertiesScan</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookstoreApplication</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="w">        </span><span class="n">SpringApplication</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="n">BookstoreApplication</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">);</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li>
<p><strong>Anotación</strong> <code>@ConfigurationPropertiesScan</code>:</p>
<ul>
<li>Habilita el escaneo de las clases anotadas con <code>@ConfigurationProperties</code> en el paquete y sus subpaquetes. Esto es necesario para que Spring Boot detecte y configure las propiedades automáticamente.</li>
</ul>
</li>
</ul>
<h4 id="paso-2-creacion-de-bookmapper"><strong>Paso 2: Creacion de <code>BookMapper</code></strong></h4>
<p>Dentro del paquete <code>mapper</code>, creamos una clase llamada <code>BookMapper</code> que contiene métodos para convertir entre <code>BookEntity</code> y <code>Book</code>.</p>
<div class="language-java highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BookMapper.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-33-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-33-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-33-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-33-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-33-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-33-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-33-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-33-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-33-10">10</a></span>
<span class="normal"><a href="#__codelineno-33-11">11</a></span>
<span class="normal"><a href="#__codelineno-33-12">12</a></span>
<span class="normal"><a href="#__codelineno-33-13">13</a></span>
<span class="normal"><a href="#__codelineno-33-14">14</a></span>
<span class="normal"><a href="#__codelineno-33-15">15</a></span>
<span class="normal"><a href="#__codelineno-33-16">16</a></span>
<span class="normal"><a href="#__codelineno-33-17">17</a></span>
<span class="normal"><a href="#__codelineno-33-18">18</a></span>
<span class="normal"><a href="#__codelineno-33-19">19</a></span>
<span class="normal"><a href="#__codelineno-33-20">20</a></span>
<span class="normal"><a href="#__codelineno-33-21">21</a></span>
<span class="normal"><a href="#__codelineno-33-22">22</a></span>
<span class="normal"><a href="#__codelineno-33-23">23</a></span>
<span class="normal"><a href="#__codelineno-33-24">24</a></span>
<span class="normal"><a href="#__codelineno-33-25">25</a></span>
<span class="normal"><a href="#__codelineno-33-26">26</a></span>
<span class="normal"><a href="#__codelineno-33-27">27</a></span>
<span class="normal"><a href="#__codelineno-33-28">28</a></span>
<span class="normal"><a href="#__codelineno-33-29">29</a></span>
<span class="normal"><a href="#__codelineno-33-30">30</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.mapper</span><span class="p">;</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2"></a>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.dto.Book</span><span class="p">;</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.model.BookEntity</span><span class="p">;</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5"></a>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookMapper</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Book</span><span class="w"> </span><span class="nf">toBook</span><span class="p">(</span><span class="n">BookEntity</span><span class="w"> </span><span class="n">entity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Book</span><span class="p">(</span>
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9"></a><span class="w">                </span><span class="n">entity</span><span class="p">.</span><span class="na">getId</span><span class="p">().</span><span class="na">toString</span><span class="p">(),</span>
</span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10"></a><span class="w">                </span><span class="n">entity</span><span class="p">.</span><span class="na">getCode</span><span class="p">(),</span>
</span><span id="__span-33-11"><a id="__codelineno-33-11" name="__codelineno-33-11"></a><span class="w">                </span><span class="n">entity</span><span class="p">.</span><span class="na">getName</span><span class="p">(),</span>
</span><span id="__span-33-12"><a id="__codelineno-33-12" name="__codelineno-33-12"></a><span class="w">                </span><span class="n">entity</span><span class="p">.</span><span class="na">getDescription</span><span class="p">(),</span>
</span><span id="__span-33-13"><a id="__codelineno-33-13" name="__codelineno-33-13"></a><span class="w">                </span><span class="n">entity</span><span class="p">.</span><span class="na">getPrice</span><span class="p">(),</span>
</span><span id="__span-33-14"><a id="__codelineno-33-14" name="__codelineno-33-14"></a><span class="w">                </span><span class="n">entity</span><span class="p">.</span><span class="na">getImageUrl</span><span class="p">(),</span>
</span><span id="__span-33-15"><a id="__codelineno-33-15" name="__codelineno-33-15"></a><span class="w">                </span><span class="n">entity</span><span class="p">.</span><span class="na">getFilePath</span><span class="p">());</span>
</span><span id="__span-33-16"><a id="__codelineno-33-16" name="__codelineno-33-16"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-33-17"><a id="__codelineno-33-17" name="__codelineno-33-17"></a>
</span><span id="__span-33-18"><a id="__codelineno-33-18" name="__codelineno-33-18"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">BookEntity</span><span class="w"> </span><span class="nf">toEntity</span><span class="p">(</span><span class="n">Book</span><span class="w"> </span><span class="n">book</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-19"><a id="__codelineno-33-19" name="__codelineno-33-19"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BookEntity</span><span class="p">(</span>
</span><span id="__span-33-20"><a id="__codelineno-33-20" name="__codelineno-33-20"></a><span class="w">                </span><span class="n">Long</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">book</span><span class="p">.</span><span class="na">id</span><span class="p">()),</span>
</span><span id="__span-33-21"><a id="__codelineno-33-21" name="__codelineno-33-21"></a><span class="w">                </span><span class="n">book</span><span class="p">.</span><span class="na">code</span><span class="p">(),</span>
</span><span id="__span-33-22"><a id="__codelineno-33-22" name="__codelineno-33-22"></a><span class="w">                </span><span class="n">book</span><span class="p">.</span><span class="na">name</span><span class="p">(),</span>
</span><span id="__span-33-23"><a id="__codelineno-33-23" name="__codelineno-33-23"></a><span class="w">                </span><span class="n">book</span><span class="p">.</span><span class="na">description</span><span class="p">(),</span>
</span><span id="__span-33-24"><a id="__codelineno-33-24" name="__codelineno-33-24"></a><span class="w">                </span><span class="n">book</span><span class="p">.</span><span class="na">price</span><span class="p">(),</span>
</span><span id="__span-33-25"><a id="__codelineno-33-25" name="__codelineno-33-25"></a><span class="w">                </span><span class="n">book</span><span class="p">.</span><span class="na">imageUrl</span><span class="p">(),</span>
</span><span id="__span-33-26"><a id="__codelineno-33-26" name="__codelineno-33-26"></a><span class="w">                </span><span class="n">book</span><span class="p">.</span><span class="na">filePath</span><span class="p">(),</span>
</span><span id="__span-33-27"><a id="__codelineno-33-27" name="__codelineno-33-27"></a><span class="w">                </span><span class="kc">null</span><span class="p">,</span>
</span><span id="__span-33-28"><a id="__codelineno-33-28" name="__codelineno-33-28"></a><span class="w">                </span><span class="kc">null</span><span class="p">);</span>
</span><span id="__span-33-29"><a id="__codelineno-33-29" name="__codelineno-33-29"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-33-30"><a id="__codelineno-33-30" name="__codelineno-33-30"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li><strong>Líneas 6-16</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Book</span><span class="w"> </span><span class="nf">toBook</span><span class="p">(</span><span class="n">BookEntity</span><span class="w"> </span><span class="n">entity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Book</span><span class="p">(</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="w">            </span><span class="n">entity</span><span class="p">.</span><span class="na">getId</span><span class="p">().</span><span class="na">toString</span><span class="p">(),</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">            </span><span class="n">entity</span><span class="p">.</span><span class="na">getCode</span><span class="p">(),</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">            </span><span class="n">entity</span><span class="p">.</span><span class="na">getName</span><span class="p">(),</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">            </span><span class="n">entity</span><span class="p">.</span><span class="na">getDescription</span><span class="p">(),</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="w">            </span><span class="n">entity</span><span class="p">.</span><span class="na">getPrice</span><span class="p">(),</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="w">            </span><span class="n">entity</span><span class="p">.</span><span class="na">getImageUrl</span><span class="p">(),</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="w">            </span><span class="n">entity</span><span class="p">.</span><span class="na">getFilePath</span><span class="p">());</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="p">}</span>
</span></code></pre></div>
<p>Define el método <code>toBook</code> que convierte un <code>BookEntity</code> en un <code>Book</code>.</p>
<ul>
<li><strong>Líneas 18-29</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">BookEntity</span><span class="w"> </span><span class="nf">toEntity</span><span class="p">(</span><span class="n">Book</span><span class="w"> </span><span class="n">book</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BookEntity</span><span class="p">(</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="w">            </span><span class="n">Long</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">book</span><span class="p">.</span><span class="na">id</span><span class="p">()),</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">            </span><span class="n">book</span><span class="p">.</span><span class="na">code</span><span class="p">(),</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="w">            </span><span class="n">book</span><span class="p">.</span><span class="na">name</span><span class="p">(),</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">            </span><span class="n">book</span><span class="p">.</span><span class="na">description</span><span class="p">(),</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="w">            </span><span class="n">book</span><span class="p">.</span><span class="na">price</span><span class="p">(),</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="w">            </span><span class="n">book</span><span class="p">.</span><span class="na">imageUrl</span><span class="p">(),</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="w">            </span><span class="n">book</span><span class="p">.</span><span class="na">filePath</span><span class="p">(),</span>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="w">            </span><span class="kc">null</span><span class="p">,</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="w">            </span><span class="kc">null</span><span class="p">);</span>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="p">}</span>
</span></code></pre></div>
<p>Define el método <code>toEntity</code> que convierte un <code>Book</code> en un <code>BookEntity</code>.</p>
<p><strong>Beneficios de Usar un <code>Mapper</code></strong></p>
<ul>
<li>
<p><strong>Separación de Responsabilidades</strong>: Usar un <code>mapper</code> permite mantener una clara separación entre la lógica de la aplicación y la lógica de persistencia. Esto significa que las clases de entidad (<code>@Entity</code>) solo se utilizan para la persistencia de datos, mientras que los DTO (Data Transfer Objects) se utilizan para transferir datos entre las capas de la aplicación.</p>
</li>
<li>
<p><strong>Simplificación del Código</strong>: Los mappers simplifican el código al encapsular la lógica de conversión entre entidades y DTOs en un solo lugar. Esto reduce la repetición de código y hace que el mantenimiento sea más sencillo.</p>
</li>
<li>
<p><strong>Mejor Mantenibilidad</strong>: Si cambian los requisitos de la aplicación, es más fácil actualizar la lógica de mapeo en una sola clase en lugar de buscar y actualizar múltiples lugares en el código.</p>
</li>
<li>
<p><strong>Flexibilidad</strong>: Permite personalizar los objetos que se envían y reciben en las diferentes capas de la aplicación sin afectar directamente a las entidades de base de datos. Por ejemplo, puedes agregar campos adicionales en el DTO para fines de visualización sin cambiar la estructura de la base de datos.</p>
</li>
<li>
<p><strong>Evita Exposición de Entidades</strong>: No se recomienda exponer directamente las entidades (<code>@Entity</code>) a las capas superiores de la aplicación (como la capa de presentación). Esto protege las entidades de cambios accidentales y asegura que solo los datos necesarios se transfieran entre las capas.</p>
</li>
</ul>
<h4 id="paso-3-crear-la-clase-del-servicio"><strong>Paso 3: Crear la Clase del Servicio</strong></h4>
<p>Dentro del paquete <code>service</code>, creamos una clase llamada <code>BookService</code>. Usamos las anotaciones <code>@Service</code> y <code>@Transactional</code> para indicar que esta clase es un servicio de Spring y que las transacciones deben ser manejadas automáticamente.</p>
<p><strong>Definir la Clase del Servicio</strong></p>
<div class="language-java highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BookService.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-36-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-36-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-36-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-36-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-36-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-36-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-36-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-36-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-36-10">10</a></span>
<span class="normal"><a href="#__codelineno-36-11">11</a></span>
<span class="normal"><a href="#__codelineno-36-12">12</a></span>
<span class="normal"><a href="#__codelineno-36-13">13</a></span>
<span class="normal"><a href="#__codelineno-36-14">14</a></span>
<span class="normal"><a href="#__codelineno-36-15">15</a></span>
<span class="normal"><a href="#__codelineno-36-16">16</a></span>
<span class="normal"><a href="#__codelineno-36-17">17</a></span>
<span class="normal"><a href="#__codelineno-36-18">18</a></span>
<span class="normal"><a href="#__codelineno-36-19">19</a></span>
<span class="normal"><a href="#__codelineno-36-20">20</a></span>
<span class="normal"><a href="#__codelineno-36-21">21</a></span>
<span class="normal"><a href="#__codelineno-36-22">22</a></span>
<span class="normal"><a href="#__codelineno-36-23">23</a></span>
<span class="normal"><a href="#__codelineno-36-24">24</a></span>
<span class="normal"><a href="#__codelineno-36-25">25</a></span>
<span class="normal"><a href="#__codelineno-36-26">26</a></span>
<span class="normal"><a href="#__codelineno-36-27">27</a></span>
<span class="normal"><a href="#__codelineno-36-28">28</a></span>
<span class="normal"><a href="#__codelineno-36-29">29</a></span>
<span class="normal"><a href="#__codelineno-36-30">30</a></span>
<span class="normal"><a href="#__codelineno-36-31">31</a></span>
<span class="normal"><a href="#__codelineno-36-32">32</a></span>
<span class="normal"><a href="#__codelineno-36-33">33</a></span>
<span class="normal"><a href="#__codelineno-36-34">34</a></span>
<span class="normal"><a href="#__codelineno-36-35">35</a></span>
<span class="normal"><a href="#__codelineno-36-36">36</a></span>
<span class="normal"><a href="#__codelineno-36-37">37</a></span>
<span class="normal"><a href="#__codelineno-36-38">38</a></span>
<span class="normal"><a href="#__codelineno-36-39">39</a></span>
<span class="normal"><a href="#__codelineno-36-40">40</a></span>
<span class="normal"><a href="#__codelineno-36-41">41</a></span>
<span class="normal"><a href="#__codelineno-36-42">42</a></span>
<span class="normal"><a href="#__codelineno-36-43">43</a></span>
<span class="normal"><a href="#__codelineno-36-44">44</a></span>
<span class="normal"><a href="#__codelineno-36-45">45</a></span>
<span class="normal"><a href="#__codelineno-36-46">46</a></span>
<span class="normal"><a href="#__codelineno-36-47">47</a></span>
<span class="normal"><a href="#__codelineno-36-48">48</a></span>
<span class="normal"><a href="#__codelineno-36-49">49</a></span>
<span class="normal"><a href="#__codelineno-36-50">50</a></span>
<span class="normal"><a href="#__codelineno-36-51">51</a></span>
<span class="normal"><a href="#__codelineno-36-52">52</a></span>
<span class="normal"><a href="#__codelineno-36-53">53</a></span>
<span class="normal"><a href="#__codelineno-36-54">54</a></span>
<span class="normal"><a href="#__codelineno-36-55">55</a></span>
<span class="normal"><a href="#__codelineno-36-56">56</a></span>
<span class="normal"><a href="#__codelineno-36-57">57</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.service</span><span class="p">;</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2"></a>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.config.ApplicationProperties</span><span class="p">;</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.dto.Book</span><span class="p">;</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.dto.PagedResult</span><span class="p">;</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.mapper.BookMapper</span><span class="p">;</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.model.BookEntity</span><span class="p">;</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.repository.BookRepository</span><span class="p">;</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.data.domain.Page</span><span class="p">;</span>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.data.domain.PageRequest</span><span class="p">;</span>
</span><span id="__span-36-12"><a id="__codelineno-36-12" name="__codelineno-36-12"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.data.domain.Pageable</span><span class="p">;</span>
</span><span id="__span-36-13"><a id="__codelineno-36-13" name="__codelineno-36-13"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.data.domain.Sort</span><span class="p">;</span>
</span><span id="__span-36-14"><a id="__codelineno-36-14" name="__codelineno-36-14"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>
</span><span id="__span-36-15"><a id="__codelineno-36-15" name="__codelineno-36-15"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>
</span><span id="__span-36-16"><a id="__codelineno-36-16" name="__codelineno-36-16"></a>
</span><span id="__span-36-17"><a id="__codelineno-36-17" name="__codelineno-36-17"></a><span class="nd">@Service</span>
</span><span id="__span-36-18"><a id="__codelineno-36-18" name="__codelineno-36-18"></a><span class="nd">@Transactional</span>
</span><span id="__span-36-19"><a id="__codelineno-36-19" name="__codelineno-36-19"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookService</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-20"><a id="__codelineno-36-20" name="__codelineno-36-20"></a>
</span><span id="__span-36-21"><a id="__codelineno-36-21" name="__codelineno-36-21"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">BookRepository</span><span class="w"> </span><span class="n">bookRepository</span><span class="p">;</span>
</span><span id="__span-36-22"><a id="__codelineno-36-22" name="__codelineno-36-22"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ApplicationProperties</span><span class="w"> </span><span class="n">properties</span><span class="p">;</span>
</span><span id="__span-36-23"><a id="__codelineno-36-23" name="__codelineno-36-23"></a>
</span><span id="__span-36-24"><a id="__codelineno-36-24" name="__codelineno-36-24"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">BookService</span><span class="p">(</span><span class="n">BookRepository</span><span class="w"> </span><span class="n">bookRepository</span><span class="p">,</span><span class="w"> </span><span class="n">ApplicationProperties</span><span class="w"> </span><span class="n">properties</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-25"><a id="__codelineno-36-25" name="__codelineno-36-25"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">bookRepository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bookRepository</span><span class="p">;</span>
</span><span id="__span-36-26"><a id="__codelineno-36-26" name="__codelineno-36-26"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">properties</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">properties</span><span class="p">;</span>
</span><span id="__span-36-27"><a id="__codelineno-36-27" name="__codelineno-36-27"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-36-28"><a id="__codelineno-36-28" name="__codelineno-36-28"></a>
</span><span id="__span-36-29"><a id="__codelineno-36-29" name="__codelineno-36-29"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">PagedResult</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getBooks</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">pageNo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-30"><a id="__codelineno-36-30" name="__codelineno-36-30"></a><span class="w">        </span><span class="n">Sort</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Sort</span><span class="p">.</span><span class="na">by</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">).</span><span class="na">ascending</span><span class="p">();</span>
</span><span id="__span-36-31"><a id="__codelineno-36-31" name="__codelineno-36-31"></a><span class="w">        </span><span class="n">pageNo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pageNo</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">pageNo</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-36-32"><a id="__codelineno-36-32" name="__codelineno-36-32"></a><span class="w">        </span><span class="n">Pageable</span><span class="w"> </span><span class="n">pageable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PageRequest</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">pageNo</span><span class="p">,</span><span class="w"> </span><span class="n">properties</span><span class="p">.</span><span class="na">pageSize</span><span class="p">(),</span><span class="w"> </span><span class="n">sort</span><span class="p">);</span>
</span><span id="__span-36-33"><a id="__codelineno-36-33" name="__codelineno-36-33"></a><span class="w">        </span><span class="n">Page</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="w"> </span><span class="n">booksPage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bookRepository</span><span class="p">.</span><span class="na">findAll</span><span class="p">(</span><span class="n">pageable</span><span class="p">).</span><span class="na">map</span><span class="p">(</span><span class="n">BookMapper</span><span class="p">::</span><span class="n">toBook</span><span class="p">);</span>
</span><span id="__span-36-34"><a id="__codelineno-36-34" name="__codelineno-36-34"></a>
</span><span id="__span-36-35"><a id="__codelineno-36-35" name="__codelineno-36-35"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PagedResult</span><span class="o">&lt;&gt;</span><span class="p">(</span>
</span><span id="__span-36-36"><a id="__codelineno-36-36" name="__codelineno-36-36"></a><span class="w">                </span><span class="n">booksPage</span><span class="p">.</span><span class="na">getContent</span><span class="p">(),</span>
</span><span id="__span-36-37"><a id="__codelineno-36-37" name="__codelineno-36-37"></a><span class="w">                </span><span class="n">booksPage</span><span class="p">.</span><span class="na">getTotalElements</span><span class="p">(),</span>
</span><span id="__span-36-38"><a id="__codelineno-36-38" name="__codelineno-36-38"></a><span class="w">                </span><span class="n">booksPage</span><span class="p">.</span><span class="na">getNumber</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-36-39"><a id="__codelineno-36-39" name="__codelineno-36-39"></a><span class="w">                </span><span class="n">booksPage</span><span class="p">.</span><span class="na">getTotalPages</span><span class="p">(),</span>
</span><span id="__span-36-40"><a id="__codelineno-36-40" name="__codelineno-36-40"></a><span class="w">                </span><span class="n">booksPage</span><span class="p">.</span><span class="na">isFirst</span><span class="p">(),</span>
</span><span id="__span-36-41"><a id="__codelineno-36-41" name="__codelineno-36-41"></a><span class="w">                </span><span class="n">booksPage</span><span class="p">.</span><span class="na">isLast</span><span class="p">(),</span>
</span><span id="__span-36-42"><a id="__codelineno-36-42" name="__codelineno-36-42"></a><span class="w">                </span><span class="n">booksPage</span><span class="p">.</span><span class="na">hasNext</span><span class="p">(),</span>
</span><span id="__span-36-43"><a id="__codelineno-36-43" name="__codelineno-36-43"></a><span class="w">                </span><span class="n">booksPage</span><span class="p">.</span><span class="na">hasPrevious</span><span class="p">());</span>
</span><span id="__span-36-44"><a id="__codelineno-36-44" name="__codelineno-36-44"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-36-45"><a id="__codelineno-36-45" name="__codelineno-36-45"></a>
</span><span id="__span-36-46"><a id="__codelineno-36-46" name="__codelineno-36-46"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Book</span><span class="w"> </span><span class="nf">getBookByCode</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-47"><a id="__codelineno-36-47" name="__codelineno-36-47"></a><span class="w">        </span><span class="n">BookEntity</span><span class="w"> </span><span class="n">bookEntity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bookRepository</span><span class="p">.</span><span class="na">findByCode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
</span><span id="__span-36-48"><a id="__codelineno-36-48" name="__codelineno-36-48"></a><span class="w">                </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;Book not found with code: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">code</span><span class="p">));</span>
</span><span id="__span-36-49"><a id="__codelineno-36-49" name="__codelineno-36-49"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">BookMapper</span><span class="p">.</span><span class="na">toBook</span><span class="p">(</span><span class="n">bookEntity</span><span class="p">);</span>
</span><span id="__span-36-50"><a id="__codelineno-36-50" name="__codelineno-36-50"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-36-51"><a id="__codelineno-36-51" name="__codelineno-36-51"></a>
</span><span id="__span-36-52"><a id="__codelineno-36-52" name="__codelineno-36-52"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Book</span><span class="w"> </span><span class="nf">saveBook</span><span class="p">(</span><span class="n">Book</span><span class="w"> </span><span class="n">book</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-53"><a id="__codelineno-36-53" name="__codelineno-36-53"></a><span class="w">        </span><span class="n">BookEntity</span><span class="w"> </span><span class="n">bookEntity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BookMapper</span><span class="p">.</span><span class="na">toEntity</span><span class="p">(</span><span class="n">book</span><span class="p">);</span>
</span><span id="__span-36-54"><a id="__codelineno-36-54" name="__codelineno-36-54"></a><span class="w">        </span><span class="n">bookEntity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bookRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">bookEntity</span><span class="p">);</span>
</span><span id="__span-36-55"><a id="__codelineno-36-55" name="__codelineno-36-55"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">BookMapper</span><span class="p">.</span><span class="na">toBook</span><span class="p">(</span><span class="n">bookEntity</span><span class="p">);</span>
</span><span id="__span-36-56"><a id="__codelineno-36-56" name="__codelineno-36-56"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-36-57"><a id="__codelineno-36-57" name="__codelineno-36-57"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li><strong>Líneas 17-18</strong>:<ul>
<li><strong><code>@Service</code></strong>: Indica que esta clase es un servicio de Spring.</li>
<li><strong><code>@Transactional</code></strong>: Asegura que todas las operaciones en el servicio sean transaccionales.</li>
</ul>
</li>
<li><strong>Líneas 19-27</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookService</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">BookRepository</span><span class="w"> </span><span class="n">bookRepository</span><span class="p">;</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ApplicationProperties</span><span class="w"> </span><span class="n">properties</span><span class="p">;</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">BookService</span><span class="p">(</span><span class="n">BookRepository</span><span class="w"> </span><span class="n">bookRepository</span><span class="p">,</span><span class="w"> </span><span class="n">ApplicationProperties</span><span class="w"> </span><span class="n">properties</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">bookRepository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bookRepository</span><span class="p">;</span>
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">properties</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">properties</span><span class="p">;</span>
</span><span id="__span-37-8"><a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-37-9"><a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="p">}</span>
</span></code></pre></div>
<p>Define el constructor que inyecta las dependencias <code>BookRepository</code> y <code>ApplicationProperties</code>.</p>
<p><strong>Método para Recuperar Libros Usando Paginación</strong></p>
<ul>
<li><strong>Líneas 29-44</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="kd">public</span><span class="w"> </span><span class="n">PagedResult</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getBooks</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">pageNo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="w">    </span><span class="n">Sort</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Sort</span><span class="p">.</span><span class="na">by</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">).</span><span class="na">ascending</span><span class="p">();</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="w">    </span><span class="n">pageNo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pageNo</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">pageNo</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="w">    </span><span class="n">Pageable</span><span class="w"> </span><span class="n">pageable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PageRequest</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">pageNo</span><span class="p">,</span><span class="w"> </span><span class="n">properties</span><span class="p">.</span><span class="na">pageSize</span><span class="p">(),</span><span class="w"> </span><span class="n">sort</span><span class="p">);</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="w">    </span><span class="n">Page</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="w"> </span><span class="n">booksPage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bookRepository</span><span class="p">.</span><span class="na">findAll</span><span class="p">(</span><span class="n">pageable</span><span class="p">).</span><span class="na">map</span><span class="p">(</span><span class="n">BookMapper</span><span class="p">::</span><span class="n">toBook</span><span class="p">);</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PagedResult</span><span class="o">&lt;&gt;</span><span class="p">(</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="w">            </span><span class="n">booksPage</span><span class="p">.</span><span class="na">getContent</span><span class="p">(),</span>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="w">            </span><span class="n">booksPage</span><span class="p">.</span><span class="na">getTotalElements</span><span class="p">(),</span>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="w">            </span><span class="n">booksPage</span><span class="p">.</span><span class="na">getNumber</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-38-11"><a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="w">            </span><span class="n">booksPage</span><span class="p">.</span><span class="na">getTotalPages</span><span class="p">(),</span>
</span><span id="__span-38-12"><a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="w">            </span><span class="n">booksPage</span><span class="p">.</span><span class="na">isFirst</span><span class="p">(),</span>
</span><span id="__span-38-13"><a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="w">            </span><span class="n">booksPage</span><span class="p">.</span><span class="na">isLast</span><span class="p">(),</span>
</span><span id="__span-38-14"><a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a><span class="w">            </span><span class="n">booksPage</span><span class="p">.</span><span class="na">hasNext</span><span class="p">(),</span>
</span><span id="__span-38-15"><a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a><span class="w">            </span><span class="n">booksPage</span><span class="p">.</span><span class="na">hasPrevious</span><span class="p">());</span>
</span><span id="__span-38-16"><a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a><span class="p">}</span>
</span></code></pre></div>
<ul>
<li><strong><code>getBooks(int pageNo)</code></strong>: Método para recuperar los libros usando paginación.</li>
<li><strong><code>Sort sort = Sort.by("name").ascending()</code></strong>: Define la ordenación ascendente por el campo <code>name</code>.</li>
<li><strong><code>Pageable pageable = PageRequest.of(pageNo, properties.pageSize(), sort)</code></strong>: Crea un objeto <code>Pageable</code> con la página actual, el tamaño de página y la ordenación.</li>
<li><strong><code>Page&lt;Book&gt; booksPage = bookRepository.findAll(pageable).map(BookMapper::toBook)</code></strong>: Recupera una página de libros y los convierte a DTO <code>Book</code>.</li>
<li><strong><code>return new PagedResult&lt;&gt;(...)</code></strong>: Retorna un objeto PagedResult con los detalles de la página de libros.</li>
</ul>
<p><strong>Método para Recuperar Libros por el Campo code</strong></p>
<ul>
<li><strong>Líneas 46-50</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="kd">public</span><span class="w"> </span><span class="n">Book</span><span class="w"> </span><span class="nf">getBookByCode</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="w">    </span><span class="n">BookEntity</span><span class="w"> </span><span class="n">bookEntity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bookRepository</span><span class="p">.</span><span class="na">findByCode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="w">            </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;Book not found with code: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">code</span><span class="p">));</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">BookMapper</span><span class="p">.</span><span class="na">toBook</span><span class="p">(</span><span class="n">bookEntity</span><span class="p">);</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="p">}</span>
</span></code></pre></div>
<ul>
<li><strong><code>getBookByCode(String code)</code></strong>: Método para recuperar un libro por su código.</li>
<li><strong><code>bookRepository.findByCode(code)</code></strong>: Busca un libro por su código.</li>
<li><strong><code>.orElseThrow(...)</code></strong>: Lanza una excepción si el libro no se encuentra.</li>
<li><strong><code>return BookMapper.toBook(bookEntity)</code></strong>: Convierte y retorna el 
<code>BookEntity</code> a un DTO <code>Book</code>.</li>
</ul>
<p><strong>Método para Guardar un Libro</strong></p>
<ul>
<li><strong>Líneas 52-56</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="kd">public</span><span class="w"> </span><span class="n">Book</span><span class="w"> </span><span class="nf">saveBook</span><span class="p">(</span><span class="n">Book</span><span class="w"> </span><span class="n">book</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="w">    </span><span class="n">BookEntity</span><span class="w"> </span><span class="n">bookEntity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BookMapper</span><span class="p">.</span><span class="na">toEntity</span><span class="p">(</span><span class="n">book</span><span class="p">);</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="w">    </span><span class="n">bookEntity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bookRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">bookEntity</span><span class="p">);</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">BookMapper</span><span class="p">.</span><span class="na">toBook</span><span class="p">(</span><span class="n">bookEntity</span><span class="p">);</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="p">}</span>
</span></code></pre></div>
<ul>
<li><strong><code>saveBook(Book book)</code></strong>: Método para guardar un libro.</li>
<li><strong><code>BookEntity bookEntity = BookMapper.toEntity(book)</code></strong>: Convierte el DTO <code>Book</code> en una entidad <code>BookEntity</code>.</li>
<li><strong><code>bookEntity = bookRepository.save(bookEntity)</code></strong>: Guarda la entidad en la base de datos.</li>
<li><strong><code>return BookMapper.toBook(bookEntity)</code></strong>: Convierte y retorna la entidad guardada como un DTO <code>Book</code>.</li>
</ul>
<h3 id="creacion-paginacion"><strong>Creacion Paginación</strong></h3>
<p>La paginación es una técnica utilizada para dividir un conjunto grande de datos en partes más pequeñas, llamadas páginas, para facilitar su visualización y manipulación. En una aplicación web, la paginación permite cargar y mostrar datos de manera eficiente, mejorando la experiencia del usuario y el rendimiento del sistema.</p>
<p><strong>Paso 1: Crear la Clase PagedResult</strong>
Dentro del paquete <code>dto</code>, creamos un <code>record</code> Java llamado <code>PagedResult</code> que encapsula los datos de la paginación. Un <code>record</code> en Java es una clase especial que proporciona una manera concisa de definir clases inmutables con campos.</p>
<div class="language-java highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">PagedResult.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1">1</a></span>
<span class="normal"><a href="#__codelineno-41-2">2</a></span>
<span class="normal"><a href="#__codelineno-41-3">3</a></span>
<span class="normal"><a href="#__codelineno-41-4">4</a></span>
<span class="normal"><a href="#__codelineno-41-5">5</a></span>
<span class="normal"><a href="#__codelineno-41-6">6</a></span>
<span class="normal"><a href="#__codelineno-41-7">7</a></span>
<span class="normal"><a href="#__codelineno-41-8">8</a></span>
<span class="normal"><a href="#__codelineno-41-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">PagedResult</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">data</span><span class="p">,</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">totalElements</span><span class="p">,</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">pageNumber</span><span class="p">,</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">totalPages</span><span class="p">,</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">isFirst</span><span class="p">,</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7"></a><span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">isLast</span><span class="p">,</span>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8"></a><span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">hasNext</span><span class="p">,</span>
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9"></a><span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">hasPrevious</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li><strong>Línea 1</strong>: <strong><code>public record PagedResult&lt;T&gt;()</code></strong>: Define el <code>record</code> <code>PagedResult</code> que encapsula los datos de la paginación. El uso de <code>record</code> en Java permite crear una clase inmutable con un conjunto fijo de campos.</li>
</ul>
<p><strong>Campos de PagedResult</strong></p>
<ul>
<li>
<p><strong>Línea 2</strong>: <strong><code>List&lt;T&gt; data</code></strong>: Una lista que contiene los datos de la página actual. El tipo genérico <code>T</code> permite que <code>PagedResult</code> sea reutilizable para cualquier tipo de datos.</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">data</span>
</span></code></pre></div>
<ul>
<li><strong><code>data</code></strong>: Los elementos de la página actual.</li>
</ul>
</li>
<li>
<p><strong>Línea 3</strong>: <strong><code>long totalElements</code></strong>: El número total de elementos en el conjunto de datos completo.</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="kt">long</span><span class="w"> </span><span class="n">totalElements</span>
</span></code></pre></div>
<ul>
<li><strong><code>totalElements</code></strong>: El total de elementos en la colección completa.</li>
</ul>
</li>
<li>
<p><strong>Línea 4</strong>: <strong><code>int pageNumber</code></strong>: El número de la página actual (comenzando desde 1).</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">pageNumber</span>
</span></code></pre></div>
<ul>
<li><strong><code>pageNumber</code></strong>: El número de la página actual, útil para la navegación.</li>
</ul>
</li>
<li>
<p><strong>Línea 5</strong>: <strong><code>int totalPages</code></strong>: El número total de páginas disponibles.</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">totalPages</span>
</span></code></pre></div>
<ul>
<li><strong><code>totalPages</code></strong>: El total de páginas basado en el tamaño de página y el número total de elementos.</li>
</ul>
</li>
<li>
<p><strong>Línea 6</strong>: <strong>boolean isFirst</strong>: Un indicador booleano que indica si esta es la primera página.</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="kt">boolean</span><span class="w"> </span><span class="n">isFirst</span>
</span></code></pre></div>
<ul>
<li><strong>isFirst</strong>: true si es la primera página, de lo contrario false.</li>
</ul>
</li>
<li>
<p><strong>Línea 7</strong>: <strong>boolean isLast</strong>: Un indicador booleano que indica si esta es la última página.</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="kt">boolean</span><span class="w"> </span><span class="n">isLast</span>
</span></code></pre></div>
<ul>
<li><strong><code>isLast</code></strong>: true si es la última página, de lo contrario false.</li>
</ul>
</li>
<li>
<p><strong>Línea 8</strong>: <strong>boolean hasNext</strong>: Un indicador booleano que indica si hay una página siguiente disponible.</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="kt">boolean</span><span class="w"> </span><span class="n">hasNext</span>
</span></code></pre></div>
<ul>
<li><strong><code>hasNext</code></strong>: true si hay una página siguiente, de lo contrario false.</li>
</ul>
</li>
<li>
<p><strong>Línea 9</strong>: <strong>boolean hasPrevious</strong>: Un indicador booleano que indica si hay una página anterior disponible.</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="kt">boolean</span><span class="w"> </span><span class="n">hasPrevious</span>
</span></code></pre></div>
<ul>
<li><strong><code>hasPrevious</code></strong>: true si hay una página anterior, de lo contrario false.</li>
</ul>
</li>
</ul>
<p><strong>Uso del PagedResult</strong></p>
<p>El <code>PagedResult</code> se utiliza en el servicio para encapsular los resultados de la paginación y devolverlos al cliente de una manera estructurada y fácil de usar.</p>
<h3 id="creacion-controlador"><strong>Creación Controlador</strong></h3>
<h4 id="descripcion-del-controlador"><strong>Descripción del Controlador</strong></h4>
<p>El controlador es la capa de la aplicación encargada de manejar las solicitudes HTTP, procesarlas y devolver las respuestas apropiadas. Utilizamos la anotación <code>@RestController</code> para definir un controlador RESTful en Spring Boot.</p>
<table>
<thead>
<tr>
<th>Método</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span>     Recupera recursos</td>
</tr>
<tr>
<td><code>POST</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 3H5c-1.1 0-2 .9-2 2v14a2 2 0 0 0 2 2h6.81c-.39-.66-.64-1.4-.74-2.16a2.994 2.994 0 0 1-1.87-3.81C9.61 13.83 10.73 13 12 13c.44 0 .88.1 1.28.29 2.29-1.79 5.55-1.7 7.72.25V7l-4-4m-2 6H5V5h10v4m.75 12L13 18l1.16-1.16 1.59 1.59 3.59-3.59 1.16 1.41L15.75 21"/></svg></span> Guarda recursos</td>
</tr>
<tr>
<td><code>PUT</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M.41 13.41 6 19l1.41-1.42L1.83 12m20.41-6.42L11.66 16.17 7.5 12l-1.43 1.41L11.66 19l12-12M18 7l-1.41-1.42-6.35 6.35 1.42 1.41L18 7Z"/></svg></span> Actualiza recursos</td>
</tr>
<tr>
<td><code>DELETE</code></td>
<td><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg></span>     Elimina recursos</td>
</tr>
</tbody>
</table>
<h4 id="paso-1-creacion-de-la-clase-bookcontroller"><strong>Paso 1: Creación de la Clase <code>BookController</code></strong></h4>
<ol>
<li><strong>Definir la Clase del Controlador</strong>: En el paquete <code>controller</code> de la aplicación, crear una clase llamada <code>BookController</code>.</li>
<li><strong>Anotar la Clase como un Controlador REST</strong>: Utilizar la anotación <code>@RestController</code> para convertir la clase en un controlador REST.</li>
<li><strong>Inyectar el Servicio</strong>: Inyectar <code>BookService</code> para manejar la lógica de negocio.</li>
<li><strong>Definir los Métodos del Controlador</strong>: Crear métodos para manejar las diferentes operaciones CRUD (Create, Read, Update, Delete) para la entidad <code>Book</code>.</li>
</ol>
<div class="language-java highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">BookController.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-50-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-50-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-50-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-50-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-50-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-50-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-50-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-50-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-50-10">10</a></span>
<span class="normal"><a href="#__codelineno-50-11">11</a></span>
<span class="normal"><a href="#__codelineno-50-12">12</a></span>
<span class="normal"><a href="#__codelineno-50-13">13</a></span>
<span class="normal"><a href="#__codelineno-50-14">14</a></span>
<span class="normal"><a href="#__codelineno-50-15">15</a></span>
<span class="normal"><a href="#__codelineno-50-16">16</a></span>
<span class="normal"><a href="#__codelineno-50-17">17</a></span>
<span class="normal"><a href="#__codelineno-50-18">18</a></span>
<span class="normal"><a href="#__codelineno-50-19">19</a></span>
<span class="normal"><a href="#__codelineno-50-20">20</a></span>
<span class="normal"><a href="#__codelineno-50-21">21</a></span>
<span class="normal"><a href="#__codelineno-50-22">22</a></span>
<span class="normal"><a href="#__codelineno-50-23">23</a></span>
<span class="normal"><a href="#__codelineno-50-24">24</a></span>
<span class="normal"><a href="#__codelineno-50-25">25</a></span>
<span class="normal"><a href="#__codelineno-50-26">26</a></span>
<span class="normal"><a href="#__codelineno-50-27">27</a></span>
<span class="normal"><a href="#__codelineno-50-28">28</a></span>
<span class="normal"><a href="#__codelineno-50-29">29</a></span>
<span class="normal"><a href="#__codelineno-50-30">30</a></span>
<span class="normal"><a href="#__codelineno-50-31">31</a></span>
<span class="normal"><a href="#__codelineno-50-32">32</a></span>
<span class="normal"><a href="#__codelineno-50-33">33</a></span>
<span class="normal"><a href="#__codelineno-50-34">34</a></span>
<span class="normal"><a href="#__codelineno-50-35">35</a></span>
<span class="normal"><a href="#__codelineno-50-36">36</a></span>
<span class="normal"><a href="#__codelineno-50-37">37</a></span>
<span class="normal"><a href="#__codelineno-50-38">38</a></span>
<span class="normal"><a href="#__codelineno-50-39">39</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.controller</span><span class="p">;</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2"></a>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.dto.Book</span><span class="p">;</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.dto.PagedResult</span><span class="p">;</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.exception.BookNotFoundException</span><span class="p">;</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.service.BookService</span><span class="p">;</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.HttpStatus</span><span class="p">;</span>
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.ResponseEntity</span><span class="p">;</span>
</span><span id="__span-50-10"><a id="__codelineno-50-10" name="__codelineno-50-10"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.*</span><span class="p">;</span>
</span><span id="__span-50-11"><a id="__codelineno-50-11" name="__codelineno-50-11"></a>
</span><span id="__span-50-12"><a id="__codelineno-50-12" name="__codelineno-50-12"></a><span class="nd">@RestController</span>
</span><span id="__span-50-13"><a id="__codelineno-50-13" name="__codelineno-50-13"></a><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/api/books&quot;</span><span class="p">)</span>
</span><span id="__span-50-14"><a id="__codelineno-50-14" name="__codelineno-50-14"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookController</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-15"><a id="__codelineno-50-15" name="__codelineno-50-15"></a>
</span><span id="__span-50-16"><a id="__codelineno-50-16" name="__codelineno-50-16"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">BookService</span><span class="w"> </span><span class="n">bookService</span><span class="p">;</span>
</span><span id="__span-50-17"><a id="__codelineno-50-17" name="__codelineno-50-17"></a>
</span><span id="__span-50-18"><a id="__codelineno-50-18" name="__codelineno-50-18"></a><span class="w">    </span><span class="nd">@Autowired</span>
</span><span id="__span-50-19"><a id="__codelineno-50-19" name="__codelineno-50-19"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">BookController</span><span class="p">(</span><span class="n">BookService</span><span class="w"> </span><span class="n">bookService</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-20"><a id="__codelineno-50-20" name="__codelineno-50-20"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">bookService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bookService</span><span class="p">;</span>
</span><span id="__span-50-21"><a id="__codelineno-50-21" name="__codelineno-50-21"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-50-22"><a id="__codelineno-50-22" name="__codelineno-50-22"></a>
</span><span id="__span-50-23"><a id="__codelineno-50-23" name="__codelineno-50-23"></a><span class="w">    </span><span class="nd">@GetMapping</span>
</span><span id="__span-50-24"><a id="__codelineno-50-24" name="__codelineno-50-24"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">PagedResult</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getBooks</span><span class="p">(</span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;page&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pageNo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-25"><a id="__codelineno-50-25" name="__codelineno-50-25"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">bookService</span><span class="p">.</span><span class="na">getBooks</span><span class="p">(</span><span class="n">pageNo</span><span class="p">);</span>
</span><span id="__span-50-26"><a id="__codelineno-50-26" name="__codelineno-50-26"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-50-27"><a id="__codelineno-50-27" name="__codelineno-50-27"></a>
</span><span id="__span-50-28"><a id="__codelineno-50-28" name="__codelineno-50-28"></a><span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/{code}&quot;</span><span class="p">)</span>
</span><span id="__span-50-29"><a id="__codelineno-50-29" name="__codelineno-50-29"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getBookByCode</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-30"><a id="__codelineno-50-30" name="__codelineno-50-30"></a><span class="w">        </span><span class="n">Book</span><span class="w"> </span><span class="n">book</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bookService</span><span class="p">.</span><span class="na">getBookByCode</span><span class="p">(</span><span class="n">code</span><span class="p">);</span>
</span><span id="__span-50-31"><a id="__codelineno-50-31" name="__codelineno-50-31"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">book</span><span class="p">);</span>
</span><span id="__span-50-32"><a id="__codelineno-50-32" name="__codelineno-50-32"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-50-33"><a id="__codelineno-50-33" name="__codelineno-50-33"></a>
</span><span id="__span-50-34"><a id="__codelineno-50-34" name="__codelineno-50-34"></a><span class="w">    </span><span class="nd">@PostMapping</span>
</span><span id="__span-50-35"><a id="__codelineno-50-35" name="__codelineno-50-35"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">createBook</span><span class="p">(</span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">Book</span><span class="w"> </span><span class="n">book</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-36"><a id="__codelineno-50-36" name="__codelineno-50-36"></a><span class="w">        </span><span class="n">Book</span><span class="w"> </span><span class="n">createdBook</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bookService</span><span class="p">.</span><span class="na">saveBook</span><span class="p">(</span><span class="n">book</span><span class="p">);</span>
</span><span id="__span-50-37"><a id="__codelineno-50-37" name="__codelineno-50-37"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">createdBook</span><span class="p">,</span><span class="w"> </span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">CREATED</span><span class="p">);</span>
</span><span id="__span-50-38"><a id="__codelineno-50-38" name="__codelineno-50-38"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-50-39"><a id="__codelineno-50-39" name="__codelineno-50-39"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p><strong>Descripción de los Métodos</strong></p>
<p><strong>Método <code>getBooks</code></strong></p>
<ul>
<li><strong>Propósito</strong>: Recupera una lista paginada de libros.</li>
<li><strong>Ruta</strong>: <code>/api/books</code></li>
<li><strong>Método HTTP</strong>: <strong><code>GET</code></strong></li>
<li><strong>Anotación</strong>: <strong><code>@GetMapping</code></strong> indica que este método manejará solicitudes GET a la ruta <code>/books</code>.</li>
<li><strong>Parámetro</strong>: <code>page</code> (opcional, valor por defecto: 1). Utiliza <code>@RequestParam</code> para capturar el parámetro de la solicitud HTTP.</li>
<li><strong>Retorno</strong>: <code>PagedResult&lt;Book&gt;</code> con los libros paginados.</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="nd">@GetMapping</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="kd">public</span><span class="w"> </span><span class="n">PagedResult</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getBooks</span><span class="p">(</span><span class="nd">@RequestParam</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;page&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">defaultValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pageNo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">bookService</span><span class="p">.</span><span class="na">getBooks</span><span class="p">(</span><span class="n">pageNo</span><span class="p">);</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Método <code>getBookByCode</code></strong></p>
<ul>
<li><strong>Propósito</strong>: Recupera un libro por su código.</li>
<li><strong>Ruta</strong>: <code>/api/books/{code}</code></li>
<li><strong>Método HTTP</strong>: <strong><code>GET</code></strong></li>
<li><strong>Anotación</strong>: <code>@GetMapping</code> indica que este método manejará solicitudes GET a la ruta <code>/books/{code}</code>.</li>
<li><strong>Parámetro</strong>: <code>code</code> (obligatorio). Utiliza <code>@PathVariable</code> para capturar el parámetro de la ruta.</li>
<li><strong>Retorno</strong>: <code>ResponseEntity&lt;Book&gt;</code> con el libro encontrado.</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/{code}&quot;</span><span class="p">)</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getBookByCode</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="w">    </span><span class="n">Book</span><span class="w"> </span><span class="n">book</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bookService</span><span class="p">.</span><span class="na">getBookByCode</span><span class="p">(</span><span class="n">code</span><span class="p">);</span>
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">book</span><span class="p">);</span>
</span><span id="__span-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Método <code>createBook</code></strong></p>
<ul>
<li><strong>Propósito</strong>: Crea un nuevo libro.</li>
<li><strong>Ruta</strong>: <code>/api/books</code></li>
<li><strong>Método HTTP</strong>: <strong><code>POST</code></strong></li>
<li><strong>Anotación</strong>: <code>@PostMapping</code> indica que este método manejará solicitudes POST a la ruta <code>/books</code>.</li>
<li><strong>Parámetro</strong>: <code>Book</code> (en el cuerpo de la solicitud). Utiliza <code>@RequestBody</code> para capturar el cuerpo de la solicitud HTTP.</li>
<li><strong>Retorno</strong>: <code>ResponseEntity&lt;Book&gt;</code> con el libro creado y el estado HTTP 201 (Created).</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="nd">@PostMapping</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">createBook</span><span class="p">(</span><span class="nd">@RequestBody</span><span class="w"> </span><span class="n">Book</span><span class="w"> </span><span class="n">book</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="w">    </span><span class="n">Book</span><span class="w"> </span><span class="n">createdBook</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bookService</span><span class="p">.</span><span class="na">saveBook</span><span class="p">(</span><span class="n">book</span><span class="p">);</span>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">createdBook</span><span class="p">,</span><span class="w"> </span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">CREATED</span><span class="p">);</span>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="adicionar-configuracion-properties"><strong>Adicionar configuracion Properties</strong></h3>
<p>El archivo <code>application.properties</code> se utiliza en Spring Boot para configurar varias propiedades de la aplicación. Aquí, configuramos el nombre de la aplicación, el puerto del servidor, la configuración de apagado del servidor, la exposición de puntos finales de gestión y la configuración específica del servicio y de la base de datos.</p>
<p><strong>Configuración Básica de la Aplicación</strong></p>
<div class="language-properties highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">application.properties</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-54-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-54-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-54-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-54-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-54-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-54-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-54-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-54-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-54-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-54-10">10</a></span>
<span class="normal"><a href="#__codelineno-54-11">11</a></span>
<span class="normal"><a href="#__codelineno-54-12">12</a></span>
<span class="normal"><a href="#__codelineno-54-13">13</a></span>
<span class="normal"><a href="#__codelineno-54-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="na">spring.application.name</span><span class="o">=</span><span class="s">bookstore</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2"></a><span class="na">server.port</span><span class="o">=</span><span class="s">8081</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3"></a><span class="na">server.shutdown</span><span class="o">=</span><span class="s">graceful</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4"></a><span class="na">management.endpoints.web.exposure.include</span><span class="o">=</span><span class="s">*</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5"></a><span class="na">management.info.git.mode</span><span class="o">=</span><span class="s">full</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6"></a>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7"></a><span class="c1">######## Book Service Configuration  #########</span>
</span><span id="__span-54-8"><a id="__codelineno-54-8" name="__codelineno-54-8"></a><span class="na">book.page-size</span><span class="o">=</span><span class="s">10</span>
</span><span id="__span-54-9"><a id="__codelineno-54-9" name="__codelineno-54-9"></a>
</span><span id="__span-54-10"><a id="__codelineno-54-10" name="__codelineno-54-10"></a><span class="c1">######## Database Configuration  #########</span>
</span><span id="__span-54-11"><a id="__codelineno-54-11" name="__codelineno-54-11"></a><span class="na">spring.datasource.url</span><span class="o">=</span><span class="s">${DB_URL:jdbc:postgresql://localhost:15432/postgres}</span>
</span><span id="__span-54-12"><a id="__codelineno-54-12" name="__codelineno-54-12"></a><span class="na">spring.datasource.username</span><span class="o">=</span><span class="s">${DB_USERNAME:postgres}</span>
</span><span id="__span-54-13"><a id="__codelineno-54-13" name="__codelineno-54-13"></a><span class="na">spring.datasource.password</span><span class="o">=</span><span class="s">${DB_PASSWORD:postgres}</span>
</span><span id="__span-54-14"><a id="__codelineno-54-14" name="__codelineno-54-14"></a><span class="na">spring.jpa.open-in-view</span><span class="o">=</span><span class="s">false</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li>
<p><strong>Línea 1-5</strong>:</p>
<ul>
<li><strong><code>spring.application.name=bookstore</code></strong>: Define el nombre de la aplicación.</li>
<li><strong><code>server.port=8081</code></strong>: Establece el puerto en el que la aplicación se ejecutará. En este caso, el puerto 8081.</li>
<li><strong><code>server.shutdown=graceful</code></strong>: Configura el servidor para realizar un apagado ordenado, permitiendo que las solicitudes actuales se completen antes de apagar el servidor.</li>
<li><strong><code>management.endpoints.web.exposure.include=*</code></strong>: Expone todos los Endpoint de gestión.</li>
<li><strong><code>management.info.git.mode=full</code></strong>: Configura el modo de exposición de información de Git a <code>full</code>.</li>
</ul>
</li>
<li>
<p><strong>Línea 8</strong>:</p>
<ul>
<li><strong>book.page-size=10</strong>: Define el tamaño de la página para la paginación del servicio de libros. Esto significa que cada página tendrá un máximo de 10 libros.</li>
</ul>
</li>
<li>
<p><strong>Línea 11-14</strong>:  </p>
<ul>
<li><strong><code>spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:15432/postgres</code></strong>: Configura la URL de la base de datos. Utiliza una variable de entorno <code>DB_URL</code> si está disponible; de lo contrario, usa el valor por defecto <code>jdbc:postgresql://localhost:15432/postgres</code>.</li>
<li><strong><code>spring.datasource.username=${DB_USERNAME:postgres}</code></strong>: Configura el nombre de usuario de la base de datos. Utiliza una variable de entorno <code>DB_USERNAME</code> si está disponible; de lo contrario, usa el valor por defecto <code>postgres</code>.</li>
<li><strong><code>spring.datasource.password=${DB_PASSWORD:postgres}</code></strong>: Configura la contraseña de la base de datos. Utiliza una variable de entorno <code>DB_PASSWORD</code> si está disponible; de lo contrario, usa el valor por defecto <code>postgres</code>.</li>
<li><strong><code>spring.jpa.open-in-view=false</code></strong>: Desactiva la opción de open-in-view para mejorar el rendimiento.  </li>
</ul>
</li>
</ul>
<h3 id="adicionar-flyway"><strong>Adicionar flyway</strong></h3>
<p>Flyway es una herramienta de migración de base de datos que ayuda a gestionar cambios en el esquema de la base de datos de manera controlada y versionada. Utilizaremos Flyway para crear y poblar la tabla books.</p>
<p><strong>Archivo de Migración <code>V1__create_books_table.sql</code></strong>
Este archivo crea la secuencia y la tabla <code>books</code>.</p>
<div class="language-sql highlight"><span class="filename">V1__create_books_table.sql</span><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="k">create</span><span class="w"> </span><span class="n">sequence</span><span class="w"> </span><span class="n">book_id_seq</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">increment</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="mi">50</span><span class="p">;</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">books</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">nextval</span><span class="p">(</span><span class="s1">&#39;book_id_seq&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="p">,</span>
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a><span class="w">    </span><span class="n">code</span><span class="w"> </span><span class="nb">text</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">unique</span><span class="p">,</span>
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span>
</span><span id="__span-55-7"><a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a><span class="w">    </span><span class="n">description</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span>
</span><span id="__span-55-8"><a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a><span class="w">    </span><span class="n">price</span><span class="w"> </span><span class="nb">numeric</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span>
</span><span id="__span-55-9"><a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a><span class="w">    </span><span class="n">cover_path</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">250</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
</span><span id="__span-55-10"><a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a><span class="w">    </span><span class="n">file_path</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">250</span><span class="p">)</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
</span><span id="__span-55-11"><a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a><span class="w">    </span><span class="n">created</span><span class="w"> </span><span class="k">timestamp</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
</span><span id="__span-55-12"><a id="__codelineno-55-12" name="__codelineno-55-12" href="#__codelineno-55-12"></a><span class="w">    </span><span class="n">modified</span><span class="w"> </span><span class="k">timestamp</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
</span><span id="__span-55-13"><a id="__codelineno-55-13" name="__codelineno-55-13" href="#__codelineno-55-13"></a><span class="w">    </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
</span><span id="__span-55-14"><a id="__codelineno-55-14" name="__codelineno-55-14" href="#__codelineno-55-14"></a><span class="p">);</span>
</span></code></pre></div>
<ul>
<li><strong><code>create sequence book_id_seq start with 1 increment by 50;</code></strong>: Crea una secuencia para generar los identificadores únicos de los libros, comenzando en 1 y aumentando en 50.</li>
<li><strong><code>create table books (...)</code></strong>: Crea la tabla books con los siguientes campos:<ul>
<li><strong><code>id</code></strong>: Identificador único de tipo bigint, generado automáticamente utilizando la secuencia book_id_seq.</li>
<li><strong><code>code</code></strong>: Código del libro, de tipo text, único y no nulo.</li>
<li><strong><code>name</code></strong>: Nombre del libro, de tipo varchar(255), no nulo.</li>
<li><strong><code>description</code></strong>: Descripción del libro, de tipo text.</li>
<li><strong><code>price</code></strong>: Precio del libro, de tipo numeric, no nulo.</li>
<li><strong><code>cover_path</code></strong>: Ruta de la imagen de portada del libro, de tipo varchar(250), opcional.</li>
<li><strong><code>file_path</code></strong>: Ruta del archivo del libro, de tipo varchar(250), opcional.</li>
<li><strong><code>created</code></strong>: Fecha de creación del registro, de tipo timestamp, no nulo.</li>
<li><strong><code>modified</code></strong>: Fecha de modificación del registro, de tipo timestamp, opcional.</li>
<li><strong><code>primary key (id)</code></strong>: Define id como la clave primaria de la tabla.</li>
</ul>
</li>
</ul>
<p><strong>Archivo de Datos <code>V2__add_books_data.sql</code></strong></p>
<p>Este archivo inserta datos iniciales en la tabla books.</p>
<div class="language-sql highlight"><span class="filename">V2__add_books_data.sql</span><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">books</span><span class="p">(</span><span class="n">code</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="p">,</span><span class="w"> </span><span class="n">cover_path</span><span class="p">,</span><span class="w"> </span><span class="n">file_path</span><span class="p">,</span><span class="n">created</span><span class="p">)</span><span class="w"> </span><span class="k">values</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="p">(</span><span class="s1">&#39;P100&#39;</span><span class="p">,</span><span class="s1">&#39;The Hunger Games&#39;</span><span class="p">,</span><span class="s1">&#39;Winning will make you famous. Losing means certain death...&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">34</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="k">current_timestamp</span><span class="p">),</span>
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="p">(</span><span class="s1">&#39;P101&#39;</span><span class="p">,</span><span class="s1">&#39;To Kill a Mockingbird&#39;</span><span class="p">,</span><span class="s1">&#39;The unforgettable novel of a childhood in a sleepy Southern town and the crisis of conscience that rocked it...&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">45</span><span class="p">.</span><span class="mi">40</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">current_timestamp</span><span class="p">),</span>
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="p">(</span><span class="s1">&#39;P102&#39;</span><span class="p">,</span><span class="s1">&#39;The Chronicles of Narnia&#39;</span><span class="p">,</span><span class="s1">&#39;Journeys to the end of the world, fantastic creatures, and epic battles between good and evil—what more could any reader ask for in one book?...&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">44</span><span class="p">.</span><span class="mi">50</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">current_timestamp</span><span class="p">);</span>
</span></code></pre></div>
<h3 id="probar-el-endpoint"><strong>Probar el Endpoint</strong></h3>
<h4 id="probando-el-endpoint-general"><strong>Probando el Endpoint General</strong></h4>
<p>Esta es la url que vamos a probar:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>curl<span class="w"> </span>--location<span class="w"> </span><span class="s1">&#39;http://localhost:8081/api/books&#39;</span>
</span></code></pre></div>
<p>El resultado esperado es el siguiente:</p>
<p>En esta respuesta, podemos observar que se obtiene una lista de libros disponibles en nuestra base de datos. Cada libro contiene información detallada como <code>id</code>, <code>código</code>, <code>nombre</code>, <code>descripción</code>, <code>precio</code>, entre otros.</p>
<p>Para realizar esta prueba en Postman:</p>
<ol>
<li><strong>Configurar la Solicitud</strong>:<ul>
<li>Método: GET</li>
<li>URL: <code>http://localhost:8081/api/books</code></li>
</ul>
</li>
<li><strong>Ejecutar la Prueba</strong>:<ul>
<li>Hacer clic en el botón <strong>"Send"</strong> y observar el resultado en la pestaña <strong>"Body"</strong>.</li>
</ul>
</li>
</ol>
<p>El resultado esperado en Postman es similar a la imagen proporcionada.</p>
<p><img alt="GeoLabs BookStore" src="../files/figura2.png" title="GeoLabs BookStore" /></p>
<h4 id="probando-el-endpoint-por-codigo-de-libro"><strong>Probando el Endpoint por Código de Libro</strong></h4>
<p>Vamos a probar el segundo endpoint, donde realizaremos una búsqueda específica por el código del libro. La URL que utilizaremos es:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>curl<span class="w"> </span>--location<span class="w"> </span><span class="s1">&#39;http://localhost:8081/api/books/P101&#39;</span>
</span></code></pre></div>
<p>El resultado esperado es el siguiente:</p>
<p>Aquí, podemos observar la información detallada de un libro específico identificado por el código <code>P101</code>.</p>
<p>Para realizar esta prueba en Postman:</p>
<ol>
<li>
<p><strong>Configurar la Solicitud</strong>:</p>
<ul>
<li>Método: GET</li>
<li>URL: <code>http://localhost:8081/api/books/P101</code></li>
</ul>
</li>
<li>
<p><strong>Ejecutar la Prueba</strong>:</p>
<ul>
<li>Hacer clic en el botón <strong>"Send"</strong> y observar el resultado en la pestaña <strong>"Body"</strong>.</li>
</ul>
</li>
</ol>
<p>El resultado esperado en Postman es similar a la imagen proporcionada.</p>
<p><img alt="GeoLabs BookStore" src="../files/figura3.png" title="GeoLabs BookStore" /></p>
<h4 id="manejo-de-errores-para-codigos-no-existentes"><strong>Manejo de Errores para Códigos No Existentes</strong></h4>
<p>Nos preguntamos qué pasa si en esta consulta le enviamos un código de libro que no existe. Vamos a probar con el código <code>P103</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>curl<span class="w"> </span>--location<span class="w"> </span><span class="s1">&#39;http://localhost:8081/api/books/P103&#39;</span>
</span></code></pre></div>
<p>El resultado obtenido es el siguiente:</p>
<p><img alt="GeoLabs BookStore" src="../files/figura4.png" title="GeoLabs BookStore" /></p>
<p>En este caso, observamos que el resultado no es el esperado, ya que se retorna un estado <code>500 Internal Server Error</code> en lugar de un <code>404 Not Found</code>. Esto indica que el servidor no manejó adecuadamente la ausencia del libro con el código proporcionado.</p>
<h4 id="corrigiendo-el-manejo-de-errores"><strong>Corrigiendo el Manejo de Errores</strong></h4>
<p>Para manejar este tipo de errores de manera adecuada y proporcionar una respuesta más descriptiva, vamos a realizar las siguientes correcciones en nuestro código:</p>
<ol>
<li><strong>Actualizar el Servicio</strong>:<ul>
<li>Modificar el método de servicio para lanzar una excepción controlada en lugar de una excepción genérica.</li>
</ul>
</li>
<li><strong>Controlador de Excepciones Globales</strong>:<ul>
<li>Implementar un controlador de excepciones globales en nuestro proyecto Spring Boot para manejar los errores de manera centralizada.</li>
</ul>
</li>
</ol>
<p>Con estas modificaciones, lograremos que el sistema retorne un estado <code>404 Not Found</code> cuando se busque un libro que no existe en la base de datos, detallando mejor los errores que nos encontremos y mejorando la experiencia del usuario.</p>
<h3 id="manejo-de-excepciones-de-la-api"><strong>Manejo de Excepciones de la API</strong></h3>
<p>El manejo de excepciones en una API es crucial para proporcionar mensajes de error claros y útiles cuando algo sale mal. Esto ayuda a los clientes de la API a entender por qué una solicitud falló y cómo pueden corregirla. Vamos a crear una excepción personalizada <code>BookNotFoundException</code> y un manejador global de excepciones para nuestra API.</p>
<h4 id="excepcion-personalizada-booknotfoundexception"><strong>Excepción Personalizada <code>BookNotFoundException</code></strong></h4>
<p>La excepción <code>BookNotFoundException</code> se utiliza para manejar la situación en la que no se encuentra un libro con el código especificado en la base de datos. Esta excepción permite devolver un código de estado <code>HTTP 404 (Not Found)</code> con un mensaje claro que indica el problema.</p>
<div class="language-java highlight"><span class="filename">BookNotFoundException.java</span><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookNotFoundException</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">RuntimeException</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">BookNotFoundException</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
</span><span id="__span-60-4"><a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-60-5"><a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a>
</span><span id="__span-60-6"><a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">BookNotFoundException</span><span class="w"> </span><span class="nf">forCode</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-60-7"><a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BookNotFoundException</span><span class="p">(</span><span class="s">&quot;Book with code &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; not found&quot;</span><span class="p">);</span>
</span><span id="__span-60-8"><a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-60-9"><a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a><span class="p">}</span>
</span></code></pre></div>
<h4 id="implementacion-excepciones-de-la-api"><strong>Implementación Excepciones de la API</strong></h4>
<ol>
<li><strong>Crear la Clase de Excepción</strong>: Dentro del paquete <code>exception</code>, crear una clase llamada <code>BookNotFoundException</code>.</li>
</ol>
<div class="language-java highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.exception</span><span class="p">;</span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="cm">/**</span>
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a><span class="cm"> * Excepción personalizada para manejar el caso en el que un libro no se encuentra</span>
</span><span id="__span-61-5"><a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a><span class="cm"> * en la base de datos.</span>
</span><span id="__span-61-6"><a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a><span class="cm"> */</span>
</span><span id="__span-61-7"><a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookNotFoundException</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">RuntimeException</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-61-8"><a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-61-9"><a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a><span class="cm">     * Constructor que acepta un mensaje de error.</span>
</span><span id="__span-61-10"><a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a><span class="cm">     *</span>
</span><span id="__span-61-11"><a id="__codelineno-61-11" name="__codelineno-61-11" href="#__codelineno-61-11"></a><span class="cm">     * @param message El mensaje de error.</span>
</span><span id="__span-61-12"><a id="__codelineno-61-12" name="__codelineno-61-12" href="#__codelineno-61-12"></a><span class="cm">     */</span>
</span><span id="__span-61-13"><a id="__codelineno-61-13" name="__codelineno-61-13" href="#__codelineno-61-13"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">BookNotFoundException</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-61-14"><a id="__codelineno-61-14" name="__codelineno-61-14" href="#__codelineno-61-14"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
</span><span id="__span-61-15"><a id="__codelineno-61-15" name="__codelineno-61-15" href="#__codelineno-61-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-61-16"><a id="__codelineno-61-16" name="__codelineno-61-16" href="#__codelineno-61-16"></a>
</span><span id="__span-61-17"><a id="__codelineno-61-17" name="__codelineno-61-17" href="#__codelineno-61-17"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-61-18"><a id="__codelineno-61-18" name="__codelineno-61-18" href="#__codelineno-61-18"></a><span class="cm">     * Método estático para crear una excepción con un mensaje específico</span>
</span><span id="__span-61-19"><a id="__codelineno-61-19" name="__codelineno-61-19" href="#__codelineno-61-19"></a><span class="cm">     * para el código del libro.</span>
</span><span id="__span-61-20"><a id="__codelineno-61-20" name="__codelineno-61-20" href="#__codelineno-61-20"></a><span class="cm">     *</span>
</span><span id="__span-61-21"><a id="__codelineno-61-21" name="__codelineno-61-21" href="#__codelineno-61-21"></a><span class="cm">     * @param code El código del libro no encontrado.</span>
</span><span id="__span-61-22"><a id="__codelineno-61-22" name="__codelineno-61-22" href="#__codelineno-61-22"></a><span class="cm">     * @return Una nueva instancia de BookNotFoundException.</span>
</span><span id="__span-61-23"><a id="__codelineno-61-23" name="__codelineno-61-23" href="#__codelineno-61-23"></a><span class="cm">     */</span>
</span><span id="__span-61-24"><a id="__codelineno-61-24" name="__codelineno-61-24" href="#__codelineno-61-24"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">BookNotFoundException</span><span class="w"> </span><span class="nf">forCode</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-61-25"><a id="__codelineno-61-25" name="__codelineno-61-25" href="#__codelineno-61-25"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BookNotFoundException</span><span class="p">(</span><span class="s">&quot;Book with code &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; not found&quot;</span><span class="p">);</span>
</span><span id="__span-61-26"><a id="__codelineno-61-26" name="__codelineno-61-26" href="#__codelineno-61-26"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-61-27"><a id="__codelineno-61-27" name="__codelineno-61-27" href="#__codelineno-61-27"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Descripción del Código</strong></p>
<ul>
<li>
<p><strong>Clase <code>BookNotFoundException</code></strong>:</p>
<ul>
<li><strong>Propósito</strong>: Manejar la situación en la que un libro no se encuentra en la base de datos.</li>
<li><strong>Herencia</strong>: Extiende <code>RuntimeException</code> para ser utilizada como una excepción no verificada.</li>
</ul>
</li>
<li>
<p><strong>Constructor</strong>:</p>
<ul>
<li>Acepta un mensaje de error como parámetro y lo pasa a la clase base <code>RuntimeException</code>.</li>
</ul>
</li>
<li>
<p><strong>Método estático forCode</strong>:</p>
<ul>
<li>Facilita la creación de una instancia de <code>BookNotFoundException</code> con un mensaje específico que incluye el código del libro no encontrado.</li>
</ul>
</li>
</ul>
<h4 id="manejando-excepciones-de-forma-global"><strong>Manejando Excepciones de Forma Global</strong></h4>
<p>Para manejar las excepciones de forma global y devolver respuestas HTTP apropiadas, podemos crear un manejador global de excepciones usando @ControllerAdvice.</p>
<h4 id="implementacion-excepciones-de-forma-global"><strong>Implementación Excepciones de Forma Global</strong></h4>
<ul>
<li><strong>Crear la Clase de Manejador Global de Excepciones</strong>: Dentro del paquete <code>exception</code>, crear una clase llamada <code>GlobalExceptionHandler</code>.</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.jconfdominicana.bookstore.exception</span><span class="p">;</span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.HttpStatus</span><span class="p">;</span>
</span><span id="__span-62-4"><a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.ResponseEntity</span><span class="p">;</span>
</span><span id="__span-62-5"><a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.ExceptionHandler</span><span class="p">;</span>
</span><span id="__span-62-6"><a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.RestControllerAdvice</span><span class="p">;</span>
</span><span id="__span-62-7"><a id="__codelineno-62-7" name="__codelineno-62-7" href="#__codelineno-62-7"></a>
</span><span id="__span-62-8"><a id="__codelineno-62-8" name="__codelineno-62-8" href="#__codelineno-62-8"></a><span class="cm">/**</span>
</span><span id="__span-62-9"><a id="__codelineno-62-9" name="__codelineno-62-9" href="#__codelineno-62-9"></a><span class="cm"> * Manejador global de excepciones para la aplicación.</span>
</span><span id="__span-62-10"><a id="__codelineno-62-10" name="__codelineno-62-10" href="#__codelineno-62-10"></a><span class="cm"> */</span>
</span><span id="__span-62-11"><a id="__codelineno-62-11" name="__codelineno-62-11" href="#__codelineno-62-11"></a><span class="nd">@RestControllerAdvice</span>
</span><span id="__span-62-12"><a id="__codelineno-62-12" name="__codelineno-62-12" href="#__codelineno-62-12"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GlobalExceptionHandler</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-62-13"><a id="__codelineno-62-13" name="__codelineno-62-13" href="#__codelineno-62-13"></a>
</span><span id="__span-62-14"><a id="__codelineno-62-14" name="__codelineno-62-14" href="#__codelineno-62-14"></a><span class="w">    </span><span class="cm">/**</span>
</span><span id="__span-62-15"><a id="__codelineno-62-15" name="__codelineno-62-15" href="#__codelineno-62-15"></a><span class="cm">     * Maneja la excepción BookNotFoundException.</span>
</span><span id="__span-62-16"><a id="__codelineno-62-16" name="__codelineno-62-16" href="#__codelineno-62-16"></a><span class="cm">     *</span>
</span><span id="__span-62-17"><a id="__codelineno-62-17" name="__codelineno-62-17" href="#__codelineno-62-17"></a><span class="cm">     * @param ex La excepción capturada.</span>
</span><span id="__span-62-18"><a id="__codelineno-62-18" name="__codelineno-62-18" href="#__codelineno-62-18"></a><span class="cm">     * @return Una respuesta HTTP con el mensaje de error y el estado 404.</span>
</span><span id="__span-62-19"><a id="__codelineno-62-19" name="__codelineno-62-19" href="#__codelineno-62-19"></a><span class="cm">     */</span>
</span><span id="__span-62-20"><a id="__codelineno-62-20" name="__codelineno-62-20" href="#__codelineno-62-20"></a><span class="w">    </span><span class="nd">@ExceptionHandler</span><span class="p">(</span><span class="n">BookNotFoundException</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
</span><span id="__span-62-21"><a id="__codelineno-62-21" name="__codelineno-62-21" href="#__codelineno-62-21"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">handleBookNotFoundException</span><span class="p">(</span><span class="n">BookNotFoundException</span><span class="w"> </span><span class="n">ex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-62-22"><a id="__codelineno-62-22" name="__codelineno-62-22" href="#__codelineno-62-22"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">ex</span><span class="p">.</span><span class="na">getMessage</span><span class="p">(),</span><span class="w"> </span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">NOT_FOUND</span><span class="p">);</span>
</span><span id="__span-62-23"><a id="__codelineno-62-23" name="__codelineno-62-23" href="#__codelineno-62-23"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-62-24"><a id="__codelineno-62-24" name="__codelineno-62-24" href="#__codelineno-62-24"></a>
</span><span id="__span-62-25"><a id="__codelineno-62-25" name="__codelineno-62-25" href="#__codelineno-62-25"></a><span class="w">    </span><span class="c1">// Otros manejadores de excepciones pueden ser añadidos aquí</span>
</span><span id="__span-62-26"><a id="__codelineno-62-26" name="__codelineno-62-26" href="#__codelineno-62-26"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Descripción del Código</strong></p>
<ul>
<li>
<p><strong>Clase <code>GlobalExceptionHandler</code></strong>:</p>
<ul>
<li><strong>Propósito</strong>: Manejar excepciones de forma global en la aplicación.</li>
<li><strong>Anotación <code>@RestControllerAdvice</code></strong>: Indica que esta clase proporciona consejos globales para los controladores y maneja excepciones arrojadas por los métodos de controlador.</li>
</ul>
</li>
<li>
<p><strong>Método <code>handleBookNotFoundException</code></strong>:</p>
<ul>
<li><strong>Propósito</strong>: Manejar la excepción <code>BookNotFoundException</code>.</li>
<li><strong>Anotación <code>@ExceptionHandler(BookNotFoundException.class)</code></strong>: Indica que este método manejará excepciones de tipo BookNotFoundException.</li>
<li><strong>Parámetro <code>ex</code></strong>: La excepción capturada.</li>
<li><strong>Retorno</strong>: Devuelve una respuesta HTTP con el mensaje de error y el estado <code>404 (Not Found)</code>.</li>
</ul>
</li>
</ul>
<h4 id="implementando-las-excepciones-en-el-servicio"><strong>Implementando las Excepciones en el Servicio</strong></h4>
<p>Modificamos en la clase de servicio el método getBookByCode para usar la nueva clase <code>BookNotFoundException</code>:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="kd">public</span><span class="w"> </span><span class="n">Book</span><span class="w"> </span><span class="nf">getBookByCode</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-63-2"><a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a><span class="w">    </span><span class="n">BookEntity</span><span class="w"> </span><span class="n">bookEntity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bookRepository</span><span class="p">.</span><span class="na">findByCode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
</span><span id="__span-63-3"><a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="w">            </span><span class="p">.</span><span class="na">orElseThrow</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BookNotFoundException</span><span class="p">(</span><span class="s">&quot;Book not found with code: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">code</span><span class="p">));</span>
</span><span id="__span-63-4"><a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">BookMapper</span><span class="p">.</span><span class="na">toBook</span><span class="p">(</span><span class="n">bookEntity</span><span class="p">);</span>
</span><span id="__span-63-5"><a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a><span class="p">}</span>
</span></code></pre></div>
<p>Después de realizar estas modificaciones, volvemos a ejecutar la prueba y este es el nuevo resultado, como se puede observar en la imagen:</p>
<p>En este caso, el sistema retorna correctamente un estado <code>404 Not Found</code> cuando no se encuentra un libro con el código especificado, con un mensaje claro que indica que el libro no fue encontrado.</p>
<p><img alt="GeoLabs BookStore" src="../files/figura5.png" title="GeoLabs BookStore" /></p>
<h3 id="enlace-a-codigo-http"><strong>Enlace a Código HTTP</strong></h3>
<p>Si quieres saber más sobre los código más usado en HTTP, te comparto el siguiente enlace <a href="../get-code-http/">Código HTTP</a>.</p>
<h2 id="subida-de-archivos"><strong>Subida de Archivos</strong></h2>
<h3 id="crear-la-clase-filesystemstorageservice"><strong>Crear la clase FileSystemStorageService</strong></h3>
<p>La clase <code>FileSystemStorageService</code> se encarga de manejar la subida, almacenamiento, carga y eliminación de archivos en el sistema de archivos.</p>
<div class="language-java highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">FileSystemStorageService.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-64-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-64-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-64-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-64-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-64-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-64-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-64-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-64-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-64-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-64-10">10</a></span>
<span class="normal"><a href="#__codelineno-64-11">11</a></span>
<span class="normal"><a href="#__codelineno-64-12">12</a></span>
<span class="normal"><a href="#__codelineno-64-13">13</a></span>
<span class="normal"><a href="#__codelineno-64-14">14</a></span>
<span class="normal"><a href="#__codelineno-64-15">15</a></span>
<span class="normal"><a href="#__codelineno-64-16">16</a></span>
<span class="normal"><a href="#__codelineno-64-17">17</a></span>
<span class="normal"><a href="#__codelineno-64-18">18</a></span>
<span class="normal"><a href="#__codelineno-64-19">19</a></span>
<span class="normal"><a href="#__codelineno-64-20">20</a></span>
<span class="normal"><a href="#__codelineno-64-21">21</a></span>
<span class="normal"><a href="#__codelineno-64-22">22</a></span>
<span class="normal"><a href="#__codelineno-64-23">23</a></span>
<span class="normal"><a href="#__codelineno-64-24">24</a></span>
<span class="normal"><a href="#__codelineno-64-25">25</a></span>
<span class="normal"><a href="#__codelineno-64-26">26</a></span>
<span class="normal"><a href="#__codelineno-64-27">27</a></span>
<span class="normal"><a href="#__codelineno-64-28">28</a></span>
<span class="normal"><a href="#__codelineno-64-29">29</a></span>
<span class="normal"><a href="#__codelineno-64-30">30</a></span>
<span class="normal"><a href="#__codelineno-64-31">31</a></span>
<span class="normal"><a href="#__codelineno-64-32">32</a></span>
<span class="normal"><a href="#__codelineno-64-33">33</a></span>
<span class="normal"><a href="#__codelineno-64-34">34</a></span>
<span class="normal"><a href="#__codelineno-64-35">35</a></span>
<span class="normal"><a href="#__codelineno-64-36">36</a></span>
<span class="normal"><a href="#__codelineno-64-37">37</a></span>
<span class="normal"><a href="#__codelineno-64-38">38</a></span>
<span class="normal"><a href="#__codelineno-64-39">39</a></span>
<span class="normal"><a href="#__codelineno-64-40">40</a></span>
<span class="normal"><a href="#__codelineno-64-41">41</a></span>
<span class="normal"><a href="#__codelineno-64-42">42</a></span>
<span class="normal"><a href="#__codelineno-64-43">43</a></span>
<span class="normal"><a href="#__codelineno-64-44">44</a></span>
<span class="normal"><a href="#__codelineno-64-45">45</a></span>
<span class="normal"><a href="#__codelineno-64-46">46</a></span>
<span class="normal"><a href="#__codelineno-64-47">47</a></span>
<span class="normal"><a href="#__codelineno-64-48">48</a></span>
<span class="normal"><a href="#__codelineno-64-49">49</a></span>
<span class="normal"><a href="#__codelineno-64-50">50</a></span>
<span class="normal"><a href="#__codelineno-64-51">51</a></span>
<span class="normal"><a href="#__codelineno-64-52">52</a></span>
<span class="normal"><a href="#__codelineno-64-53">53</a></span>
<span class="normal"><a href="#__codelineno-64-54">54</a></span>
<span class="normal"><a href="#__codelineno-64-55">55</a></span>
<span class="normal"><a href="#__codelineno-64-56">56</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1"></a><span class="nd">@Service</span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FileSystemStorageService</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">STORAGE_LOCATION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;mediafile&quot;</span><span class="p">;</span>
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4"></a>
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5"></a><span class="w">    </span><span class="nd">@PostConstruct</span>
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">init</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-7"><a id="__codelineno-64-7" name="__codelineno-64-7"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-8"><a id="__codelineno-64-8" name="__codelineno-64-8"></a><span class="w">            </span><span class="n">Files</span><span class="p">.</span><span class="na">createDirectories</span><span class="p">(</span><span class="n">Paths</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">STORAGE_LOCATION</span><span class="p">));</span>
</span><span id="__span-64-9"><a id="__codelineno-64-9" name="__codelineno-64-9"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-10"><a id="__codelineno-64-10" name="__codelineno-64-10"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;Could not initialize storage location&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
</span><span id="__span-64-11"><a id="__codelineno-64-11" name="__codelineno-64-11"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-64-12"><a id="__codelineno-64-12" name="__codelineno-64-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-64-13"><a id="__codelineno-64-13" name="__codelineno-64-13"></a>
</span><span id="__span-64-14"><a id="__codelineno-64-14" name="__codelineno-64-14"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">store</span><span class="p">(</span><span class="n">MultipartFile</span><span class="w"> </span><span class="n">file</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-15"><a id="__codelineno-64-15" name="__codelineno-64-15"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">originalFilename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="p">.</span><span class="na">getOriginalFilename</span><span class="p">();</span>
</span><span id="__span-64-16"><a id="__codelineno-64-16" name="__codelineno-64-16"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;.&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">StringUtils</span><span class="p">.</span><span class="na">getFilenameExtension</span><span class="p">(</span><span class="n">originalFilename</span><span class="p">);</span>
</span><span id="__span-64-17"><a id="__codelineno-64-17" name="__codelineno-64-17"></a>
</span><span id="__span-64-18"><a id="__codelineno-64-18" name="__codelineno-64-18"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-19"><a id="__codelineno-64-19" name="__codelineno-64-19"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;Failed to store empty file &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">filename</span><span class="p">);</span>
</span><span id="__span-64-20"><a id="__codelineno-64-20" name="__codelineno-64-20"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-64-21"><a id="__codelineno-64-21" name="__codelineno-64-21"></a>
</span><span id="__span-64-22"><a id="__codelineno-64-22" name="__codelineno-64-22"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-23"><a id="__codelineno-64-23" name="__codelineno-64-23"></a><span class="w">            </span><span class="n">InputStream</span><span class="w"> </span><span class="n">inputStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="p">.</span><span class="na">getInputStream</span><span class="p">();</span>
</span><span id="__span-64-24"><a id="__codelineno-64-24" name="__codelineno-64-24"></a><span class="w">            </span><span class="n">Files</span><span class="p">.</span><span class="na">copy</span><span class="p">(</span><span class="n">inputStream</span><span class="p">,</span><span class="w"> </span><span class="n">Paths</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">STORAGE_LOCATION</span><span class="p">).</span><span class="na">resolve</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span><span class="w"> </span><span class="n">StandardCopyOption</span><span class="p">.</span><span class="na">REPLACE_EXISTING</span><span class="p">);</span>
</span><span id="__span-64-25"><a id="__codelineno-64-25" name="__codelineno-64-25"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-26"><a id="__codelineno-64-26" name="__codelineno-64-26"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;Failed to store file &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
</span><span id="__span-64-27"><a id="__codelineno-64-27" name="__codelineno-64-27"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-64-28"><a id="__codelineno-64-28" name="__codelineno-64-28"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">filename</span><span class="p">;</span>
</span><span id="__span-64-29"><a id="__codelineno-64-29" name="__codelineno-64-29"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-64-30"><a id="__codelineno-64-30" name="__codelineno-64-30"></a>
</span><span id="__span-64-31"><a id="__codelineno-64-31" name="__codelineno-64-31"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Path</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-32"><a id="__codelineno-64-32" name="__codelineno-64-32"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Paths</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">STORAGE_LOCATION</span><span class="p">).</span><span class="na">resolve</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
</span><span id="__span-64-33"><a id="__codelineno-64-33" name="__codelineno-64-33"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-64-34"><a id="__codelineno-64-34" name="__codelineno-64-34"></a>
</span><span id="__span-64-35"><a id="__codelineno-64-35" name="__codelineno-64-35"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Resource</span><span class="w"> </span><span class="nf">loadAsResource</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-36"><a id="__codelineno-64-36" name="__codelineno-64-36"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-37"><a id="__codelineno-64-37" name="__codelineno-64-37"></a><span class="w">            </span><span class="n">Path</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
</span><span id="__span-64-38"><a id="__codelineno-64-38" name="__codelineno-64-38"></a><span class="w">            </span><span class="n">Resource</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UrlResource</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="na">toUri</span><span class="p">());</span>
</span><span id="__span-64-39"><a id="__codelineno-64-39" name="__codelineno-64-39"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">resource</span><span class="p">.</span><span class="na">exists</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">resource</span><span class="p">.</span><span class="na">isReadable</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-40"><a id="__codelineno-64-40" name="__codelineno-64-40"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">resource</span><span class="p">;</span>
</span><span id="__span-64-41"><a id="__codelineno-64-41" name="__codelineno-64-41"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-42"><a id="__codelineno-64-42" name="__codelineno-64-42"></a><span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ResourceNotFoundException</span><span class="p">(</span><span class="s">&quot;Could not read file: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">filename</span><span class="p">);</span>
</span><span id="__span-64-43"><a id="__codelineno-64-43" name="__codelineno-64-43"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-64-44"><a id="__codelineno-64-44" name="__codelineno-64-44"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">MalformedURLException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-45"><a id="__codelineno-64-45" name="__codelineno-64-45"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ResourceNotFoundException</span><span class="p">(</span><span class="s">&quot;Could not read file: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
</span><span id="__span-64-46"><a id="__codelineno-64-46" name="__codelineno-64-46"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-64-47"><a id="__codelineno-64-47" name="__codelineno-64-47"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-64-48"><a id="__codelineno-64-48" name="__codelineno-64-48"></a>
</span><span id="__span-64-49"><a id="__codelineno-64-49" name="__codelineno-64-49"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-50"><a id="__codelineno-64-50" name="__codelineno-64-50"></a><span class="w">        </span><span class="n">Path</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
</span><span id="__span-64-51"><a id="__codelineno-64-51" name="__codelineno-64-51"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-52"><a id="__codelineno-64-52" name="__codelineno-64-52"></a><span class="w">            </span><span class="n">FileSystemUtils</span><span class="p">.</span><span class="na">deleteRecursively</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
</span><span id="__span-64-53"><a id="__codelineno-64-53" name="__codelineno-64-53"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-54"><a id="__codelineno-64-54" name="__codelineno-64-54"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-64-55"><a id="__codelineno-64-55" name="__codelineno-64-55"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-64-56"><a id="__codelineno-64-56" name="__codelineno-64-56"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li>
<p><strong>Línea 1-3</strong>:</p>
<ul>
<li><strong><code>@Service</code></strong>: Indica que esta clase es un servicio Spring y será gestionada por el contenedor de Spring.</li>
<li><strong><code>STORAGE_LOCATION</code></strong>: Constante que define la ubicación en el sistema de archivos donde se almacenarán los archivos subidos.</li>
</ul>
</li>
<li>
<p><strong>Línea 5-6</strong>:</p>
<ul>
<li><strong><code>@PostConstruct</code></strong>: Anotación que indica que este método debe ejecutarse después de la inyección de dependencias para realizar la inicialización.</li>
<li><strong><code>init()</code></strong>: Método que crea el directorio de almacenamiento si no existe, lanzando una excepción si no se puede crear.</li>
</ul>
</li>
<li>
<p><strong>Línea 14-29</strong>:</p>
<ul>
<li><strong><code>store(MultipartFile file)</code></strong>: Método que almacena un archivo subido.<ul>
<li><strong><code>MultipartFile file</code></strong>: Representa el archivo subido.</li>
<li><strong><code>String originalFilename = file.getOriginalFilename();</code></strong>: Obtiene el nombre original del archivo.</li>
<li><strong><code>String filename = UUID.randomUUID() + "." + StringUtils.getFilenameExtension(originalFilename);</code></strong>: Genera un nombre único para el archivo usando UUID y mantiene la extensión original.</li>
<li><strong><code>if (file.isEmpty()) { ... }</code></strong>: Verifica si el archivo está vacío y lanza una excepción si es así.</li>
<li><strong><code>try { ... } catch (IOException e) { ... }</code></strong>: Copia el archivo al directorio de almacenamiento, reemplazando cualquier archivo existente con el mismo nombre.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Línea 31-33</strong>:</p>
<ul>
<li><strong><code>load(String filename)</code></strong>: Método que construye la ruta completa del archivo especificado.</li>
<li><strong><code>String filename</code></strong>: Nombre del archivo a cargar.</li>
<li><strong><code>Paths.get(STORAGE_LOCATION).resolve(filename);</code></strong>: Resuelve el nombre del archivo contra el directorio de almacenamiento para obtener la ruta completa.</li>
</ul>
</li>
<li>
<p><strong>Línea 35-47</strong>:</p>
<ul>
<li><strong><code>loadAsResource(String filename)</code></strong>: Método que carga un archivo como recurso.</li>
<li><strong><code>Path file = load(filename);</code></strong>: Obtiene la ruta del archivo.</li>
<li><strong><code>Resource resource = new UrlResource(file.toUri());</code></strong>: Crea un recurso a partir de la URI del archivo.</li>
<li><strong><code>if (resource.exists() || resource.isReadable()) { ... }</code></strong>: Verifica si el recurso existe y es legible.</li>
<li><strong><code>catch (MalformedURLException e) { ... }</code></strong>: Captura y maneja excepciones de URL mal formadas.</li>
</ul>
</li>
<li>
<p><strong>Línea 49-55</strong>:</p>
<ul>
<li><strong><code>delete(String filename)</code></strong>: Método que elimina un archivo especificado.</li>
<li><strong><code>Path file = load(filename);</code></strong>: Obtiene la ruta del archivo.</li>
<li><strong><code>FileSystemUtils.deleteRecursively(file);</code></strong>: Elimina el archivo y lanza una excepción si falla.</li>
</ul>
</li>
</ul>
<h3 id="excepcion-personalizada-resourcenotfoundexception"><strong>Excepción Personalizada ResourceNotFoundException</strong></h3>
<p>La clase <code>ResourceNotFoundException</code> es una excepción personalizada que se utiliza para indicar que un recurso solicitado no fue encontrado. Esta clase extiende <code>RuntimeException</code> y está anotada con <code>@ResponseStatus</code> para que, cuando sea lanzada, el servidor retorne un estado <code>HTTP 404 Not Found</code>.</p>
<h4 id="implementacion-de-resourcenotfoundexception"><strong>Implementación de ResourceNotFoundException</strong></h4>
<div class="language-java highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">ResourceNotFoundException.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-65-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-65-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-65-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-65-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-65-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-65-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-65-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-65-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-65-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-65-10">10</a></span>
<span class="normal"><a href="#__codelineno-65-11">11</a></span>
<span class="normal"><a href="#__codelineno-65-12">12</a></span>
<span class="normal"><a href="#__codelineno-65-13">13</a></span>
<span class="normal"><a href="#__codelineno-65-14">14</a></span>
<span class="normal"><a href="#__codelineno-65-15">15</a></span>
<span class="normal"><a href="#__codelineno-65-16">16</a></span>
<span class="normal"><a href="#__codelineno-65-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1"></a><span class="nd">@ResponseStatus</span><span class="p">(</span><span class="n">HttpStatus</span><span class="p">.</span><span class="na">NOT_FOUND</span><span class="p">)</span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ResourceNotFoundException</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">RuntimeException</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3"></a><span class="w">    </span><span class="c1">// Constructor sin argumentos</span>
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ResourceNotFoundException</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-65-5"><a id="__codelineno-65-5" name="__codelineno-65-5"></a><span class="w">        </span><span class="kd">super</span><span class="p">();</span>
</span><span id="__span-65-6"><a id="__codelineno-65-6" name="__codelineno-65-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-65-7"><a id="__codelineno-65-7" name="__codelineno-65-7"></a>
</span><span id="__span-65-8"><a id="__codelineno-65-8" name="__codelineno-65-8"></a><span class="w">    </span><span class="c1">// Constructor que acepta un mensaje</span>
</span><span id="__span-65-9"><a id="__codelineno-65-9" name="__codelineno-65-9"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ResourceNotFoundException</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-65-10"><a id="__codelineno-65-10" name="__codelineno-65-10"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
</span><span id="__span-65-11"><a id="__codelineno-65-11" name="__codelineno-65-11"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-65-12"><a id="__codelineno-65-12" name="__codelineno-65-12"></a>
</span><span id="__span-65-13"><a id="__codelineno-65-13" name="__codelineno-65-13"></a><span class="w">    </span><span class="c1">// Constructor que acepta un mensaje y una causa</span>
</span><span id="__span-65-14"><a id="__codelineno-65-14" name="__codelineno-65-14"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ResourceNotFoundException</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="n">Throwable</span><span class="w"> </span><span class="n">throwable</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-65-15"><a id="__codelineno-65-15" name="__codelineno-65-15"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="n">throwable</span><span class="p">);</span>
</span><span id="__span-65-16"><a id="__codelineno-65-16" name="__codelineno-65-16"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-65-17"><a id="__codelineno-65-17" name="__codelineno-65-17"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<h4 id="descripcion-de-la-implementacion"><strong>Descripción de la Implementación</strong></h4>
<ol>
<li>
<p><strong>Anotación @ResponseStatus(HttpStatus.NOT_FOUND)</strong>:</p>
<ul>
<li>Esta anotación indica que cuando esta excepción es lanzada, el servidor debe responder con un estado <code>HTTP 404 Not Found</code>. Es una forma conveniente de asociar un código de estado HTTP específico con una excepción.</li>
</ul>
</li>
<li>
<p><strong>Extensión de RuntimeException</strong>:</p>
<ul>
<li>La clase extiende <code>RuntimeException</code>, lo que la convierte en una excepción no comprobada (unchecked exception). Esto significa que no es obligatorio manejarla explícitamente en el código mediante bloques <code>try-catch</code>.</li>
</ul>
</li>
</ol>
<p><strong>Línea 4-6</strong>:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="kd">public</span><span class="w"> </span><span class="nf">ResourceNotFoundException</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a><span class="w">    </span><span class="kd">super</span><span class="p">();</span>
</span><span id="__span-66-3"><a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a><span class="p">}</span>
</span></code></pre></div>
<ul>
<li>Este es un constructor por defecto que llama al constructor sin argumentos de la clase <code>RuntimeException</code>. Se utiliza cuando no se desea proporcionar un mensaje o causa específica para la excepción.</li>
</ul>
<p><strong>Línea 9-11</strong>:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="kd">public</span><span class="w"> </span><span class="nf">ResourceNotFoundException</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a><span class="w">    </span><span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="p">}</span>
</span></code></pre></div>
<ul>
<li>Este constructor permite crear una instancia de la excepción con un mensaje descriptivo que proporciona más información sobre el motivo de la excepción. El mensaje se pasa al constructor de la superclase <code>RuntimeException</code>.</li>
</ul>
<p><strong>Línea 14-16</strong>:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="kd">public</span><span class="w"> </span><span class="nf">ResourceNotFoundException</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="n">Throwable</span><span class="w"> </span><span class="n">throwable</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a><span class="w">    </span><span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="n">throwable</span><span class="p">);</span>
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a><span class="p">}</span>
</span></code></pre></div>
<ul>
<li>Este constructor permite crear una instancia de la excepción con un mensaje descriptivo y una causa subyacente (<code>Throwable</code>). La causa representa la excepción original que provocó esta excepción y se pasa junto con el mensaje al constructor de la superclase <code>RuntimeException</code>.</li>
</ul>
<h3 id="controlador-para-la-subida-y-recuperacion-de-archivos"><strong>Controlador para la Subida y Recuperación de Archivos</strong></h3>
<h4 id="crear-la-clase-filecontroller"><strong>Crear la Clase FileController</strong></h4>
<p>La clase <code>FileController</code> maneja las solicitudes HTTP relacionadas con la subida y recuperación de archivos.</p>
<div class="language-java highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">FileController.java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-69-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-69-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-69-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-69-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-69-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-69-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-69-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-69-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-69-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-69-10">10</a></span>
<span class="normal"><a href="#__codelineno-69-11">11</a></span>
<span class="normal"><a href="#__codelineno-69-12">12</a></span>
<span class="normal"><a href="#__codelineno-69-13">13</a></span>
<span class="normal"><a href="#__codelineno-69-14">14</a></span>
<span class="normal"><a href="#__codelineno-69-15">15</a></span>
<span class="normal"><a href="#__codelineno-69-16">16</a></span>
<span class="normal"><a href="#__codelineno-69-17">17</a></span>
<span class="normal"><a href="#__codelineno-69-18">18</a></span>
<span class="normal"><a href="#__codelineno-69-19">19</a></span>
<span class="normal"><a href="#__codelineno-69-20">20</a></span>
<span class="normal"><a href="#__codelineno-69-21">21</a></span>
<span class="normal"><a href="#__codelineno-69-22">22</a></span>
<span class="normal"><a href="#__codelineno-69-23">23</a></span>
<span class="normal"><a href="#__codelineno-69-24">24</a></span>
<span class="normal"><a href="#__codelineno-69-25">25</a></span>
<span class="normal"><a href="#__codelineno-69-26">26</a></span>
<span class="normal"><a href="#__codelineno-69-27">27</a></span>
<span class="normal"><a href="#__codelineno-69-28">28</a></span>
<span class="normal"><a href="#__codelineno-69-29">29</a></span>
<span class="normal"><a href="#__codelineno-69-30">30</a></span>
<span class="normal"><a href="#__codelineno-69-31">31</a></span>
<span class="normal"><a href="#__codelineno-69-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.core.io.Resource</span><span class="p">;</span>
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.HttpHeaders</span><span class="p">;</span>
</span><span id="__span-69-4"><a id="__codelineno-69-4" name="__codelineno-69-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.http.ResponseEntity</span><span class="p">;</span>
</span><span id="__span-69-5"><a id="__codelineno-69-5" name="__codelineno-69-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.*</span><span class="p">;</span>
</span><span id="__span-69-6"><a id="__codelineno-69-6" name="__codelineno-69-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.multipart.MultipartFile</span><span class="p">;</span>
</span><span id="__span-69-7"><a id="__codelineno-69-7" name="__codelineno-69-7"></a>
</span><span id="__span-69-8"><a id="__codelineno-69-8" name="__codelineno-69-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.IOException</span><span class="p">;</span>
</span><span id="__span-69-9"><a id="__codelineno-69-9" name="__codelineno-69-9"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.nio.file.Files</span><span class="p">;</span>
</span><span id="__span-69-10"><a id="__codelineno-69-10" name="__codelineno-69-10"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span>
</span><span id="__span-69-11"><a id="__codelineno-69-11" name="__codelineno-69-11"></a>
</span><span id="__span-69-12"><a id="__codelineno-69-12" name="__codelineno-69-12"></a><span class="nd">@RestController</span>
</span><span id="__span-69-13"><a id="__codelineno-69-13" name="__codelineno-69-13"></a><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/api/files&quot;</span><span class="p">)</span>
</span><span id="__span-69-14"><a id="__codelineno-69-14" name="__codelineno-69-14"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FileController</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-69-15"><a id="__codelineno-69-15" name="__codelineno-69-15"></a>
</span><span id="__span-69-16"><a id="__codelineno-69-16" name="__codelineno-69-16"></a><span class="w">    </span><span class="nd">@Autowired</span>
</span><span id="__span-69-17"><a id="__codelineno-69-17" name="__codelineno-69-17"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">FileSystemStorageService</span><span class="w"> </span><span class="n">storageService</span><span class="p">;</span>
</span><span id="__span-69-18"><a id="__codelineno-69-18" name="__codelineno-69-18"></a>
</span><span id="__span-69-19"><a id="__codelineno-69-19" name="__codelineno-69-19"></a><span class="w">    </span><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/upload&quot;</span><span class="p">)</span>
</span><span id="__span-69-20"><a id="__codelineno-69-20" name="__codelineno-69-20"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">upload</span><span class="p">(</span><span class="nd">@RequestParam</span><span class="p">(</span><span class="s">&quot;file&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">MultipartFile</span><span class="w"> </span><span class="n">multipartFile</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-69-21"><a id="__codelineno-69-21" name="__codelineno-69-21"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">storageService</span><span class="p">.</span><span class="na">store</span><span class="p">(</span><span class="n">multipartFile</span><span class="p">);</span>
</span><span id="__span-69-22"><a id="__codelineno-69-22" name="__codelineno-69-22"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;path&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">);</span>
</span><span id="__span-69-23"><a id="__codelineno-69-23" name="__codelineno-69-23"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-69-24"><a id="__codelineno-69-24" name="__codelineno-69-24"></a>
</span><span id="__span-69-25"><a id="__codelineno-69-25" name="__codelineno-69-25"></a><span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/{filename}&quot;</span><span class="p">)</span>
</span><span id="__span-69-26"><a id="__codelineno-69-26" name="__codelineno-69-26"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Resource</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getResource</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-69-27"><a id="__codelineno-69-27" name="__codelineno-69-27"></a><span class="w">        </span><span class="n">Resource</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">storageService</span><span class="p">.</span><span class="na">loadAsResource</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
</span><span id="__span-69-28"><a id="__codelineno-69-28" name="__codelineno-69-28"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">contentType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Files</span><span class="p">.</span><span class="na">probeContentType</span><span class="p">(</span><span class="n">resource</span><span class="p">.</span><span class="na">getFile</span><span class="p">().</span><span class="na">toPath</span><span class="p">());</span>
</span><span id="__span-69-29"><a id="__codelineno-69-29" name="__codelineno-69-29"></a>
</span><span id="__span-69-30"><a id="__codelineno-69-30" name="__codelineno-69-30"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">().</span><span class="na">header</span><span class="p">(</span><span class="n">HttpHeaders</span><span class="p">.</span><span class="na">CONTENT_TYPE</span><span class="p">,</span><span class="w"> </span><span class="n">contentType</span><span class="p">).</span><span class="na">body</span><span class="p">(</span><span class="n">resource</span><span class="p">);</span>
</span><span id="__span-69-31"><a id="__codelineno-69-31" name="__codelineno-69-31"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-69-32"><a id="__codelineno-69-32" name="__codelineno-69-32"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<ul>
<li><strong>Línea 12-13</strong>:</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="nd">@RestController</span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/api/files&quot;</span><span class="p">)</span>
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FileController</span><span class="w"> </span><span class="p">{</span>
</span></code></pre></div>
<ul>
<li><strong><code>@RestController</code></strong>: Anotación que indica que esta clase es un controlador REST y que los métodos de la clase devolverán datos directamente en lugar de vistas.</li>
<li><strong><code>@RequestMapping("/api/files")</code></strong>: Establece la ruta base para todas las solicitudes manejadas por este controlador. Todas las rutas comenzarán con <code>/api/files</code>.</li>
</ul>
<p><strong>Inyección de Dependencias</strong></p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="nd">@Autowired</span>
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a><span class="kd">private</span><span class="w"> </span><span class="n">FileSystemStorageService</span><span class="w"> </span><span class="n">storageService</span><span class="p">;</span>
</span></code></pre></div>
<ul>
<li><strong><code>@Autowired</code></strong>: Inyecta una instancia del servicio FileSystemStorageService en el controlador. Este servicio se utilizará para manejar las operaciones de almacenamiento de archivos.</li>
</ul>
<p><strong>Método upload</strong></p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/upload&quot;</span><span class="p">)</span>
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a><span class="kd">public</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">upload</span><span class="p">(</span><span class="nd">@RequestParam</span><span class="p">(</span><span class="s">&quot;file&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">MultipartFile</span><span class="w"> </span><span class="n">multipartFile</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">storageService</span><span class="p">.</span><span class="na">store</span><span class="p">(</span><span class="n">multipartFile</span><span class="p">);</span>
</span><span id="__span-72-4"><a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Map</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;path&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">);</span>
</span><span id="__span-72-5"><a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a><span class="p">}</span>
</span></code></pre></div>
<ul>
<li><strong><code>@PostMapping("/upload")</code></strong>: Mapea las solicitudes HTTP POST a la ruta <code>/upload</code> a este método.</li>
<li><strong><code>@RequestParam("file") MultipartFile multipartFile</code></strong>: Captura el archivo subido desde la solicitud. El archivo debe estar en el campo de formulario con el nombre file.</li>
<li><strong><code>String path = storageService.store(multipartFile);</code></strong>: Utiliza el servicio FileSystemStorageService para almacenar el archivo y obtener la ruta del archivo almacenado.</li>
<li><strong><code>return Map.of("path", path);</code></strong>: Devuelve un mapa con la ruta del archivo almacenado.</li>
</ul>
<p><strong>Método getResource</strong></p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/{filename}&quot;</span><span class="p">)</span>
</span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">Resource</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getResource</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-73-3"><a id="__codelineno-73-3" name="__codelineno-73-3" href="#__codelineno-73-3"></a><span class="w">    </span><span class="n">Resource</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">storageService</span><span class="p">.</span><span class="na">loadAsResource</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
</span><span id="__span-73-4"><a id="__codelineno-73-4" name="__codelineno-73-4" href="#__codelineno-73-4"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">contentType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Files</span><span class="p">.</span><span class="na">probeContentType</span><span class="p">(</span><span class="n">resource</span><span class="p">.</span><span class="na">getFile</span><span class="p">().</span><span class="na">toPath</span><span class="p">());</span>
</span><span id="__span-73-5"><a id="__codelineno-73-5" name="__codelineno-73-5" href="#__codelineno-73-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="p">.</span><span class="na">ok</span><span class="p">().</span><span class="na">header</span><span class="p">(</span><span class="n">HttpHeaders</span><span class="p">.</span><span class="na">CONTENT_TYPE</span><span class="p">,</span><span class="w"> </span><span class="n">contentType</span><span class="p">).</span><span class="na">body</span><span class="p">(</span><span class="n">resource</span><span class="p">);</span>
</span><span id="__span-73-6"><a id="__codelineno-73-6" name="__codelineno-73-6" href="#__codelineno-73-6"></a><span class="p">}</span>
</span></code></pre></div>
<ul>
<li><strong><code>@GetMapping("/{filename}")</code></strong>: Mapea las solicitudes HTTP GET a la ruta /api/files/{filename} a este método.</li>
<li><strong><code>@PathVariable String filename</code></strong>: Captura el nombre del archivo de la ruta de la solicitud.</li>
<li><strong><code>Resource resource = storageService.loadAsResource(filename);</code></strong>: Utiliza el servicio FileSystemStorageService para cargar el archivo como un recurso.</li>
<li><strong><code>String contentType = Files.probeContentType(resource.getFile().toPath());</code></strong>: Determina el tipo de contenido del archivo.</li>
<li><strong><code>return ResponseEntity.ok().header(HttpHeaders.CONTENT_TYPE, contentType).body(resource);</code></strong>: Devuelve el recurso en la respuesta HTTP con el tipo de contenido adecuado.</li>
</ul>
<h3 id="probar-endpoint-subir-archivo"><strong>Probar Endpoint Subir Archivo</strong></h3>
<h4 id="problema-inicial">Problema Inicial</h4>
<p>Al intentar subir un archivo utilizando el endpoint <code>upload</code>, observamos que el archivo no se puede subir debido a una limitación de tamaño.</p>
<p>En la imagen siguiente, podemos ver que se obtiene un estado <code>413 Request Entity Too Large</code> al intentar subir el archivo:</p>
<p><img alt="GeoLabs BookStore" src="../files/figura6.png" title="GeoLabs BookStore" /></p>
<h4 id="diagnostico-del-problema"><strong>Diagnóstico del Problema</strong></h4>
<p>El error <code>413 Request Entity Too Large</code> indica que el tamaño del archivo excede el límite permitido por el servidor. Podemos confirmar esto revisando la consola del IDE, donde se muestra un mensaje que hace referencia a que el tamaño máximo permitido ha sido excedido:</p>
<p><img alt="GeoLabs BookStore" src="../files/figura7.png" title="GeoLabs BookStore" /></p>
<h4 id="solucion"><strong>Solución</strong></h4>
<p>Para resolver este problema, necesitamos incrementar el tamaño máximo permitido para los archivos subidos. Esto se puede hacer configurando las propiedades en el archivo <code>application.properties</code> de nuestro proyecto Spring Boot.</p>
<h3 id="incrementar-el-tamano-maximo-de-los-archivos-subidos"><strong>Incrementar el Tamaño Máximo de los Archivos Subidos</strong></h3>
<p>Para permitir la subida de archivos más grandes, configuramos el tamaño máximo de los archivos en <code>application.properties</code> de la siguiente manera:</p>
<div class="language-properties highlight"><span class="filename">application.properties</span><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="na">spring.servlet.multipart.max-file-size</span><span class="o">=</span><span class="s">100MB</span>
</span><span id="__span-74-2"><a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a><span class="na">spring.servlet.multipart.max-request-size</span><span class="o">=</span><span class="s">100MB</span>
</span></code></pre></div>
<ul>
<li><strong><code>spring.servlet.multipart.max-file-size=100MB</code></strong>: Establece el tamaño máximo permitido para un archivo subido a 100MB.</li>
<li><strong><code>spring.servlet.multipart.max-request-size=100MB</code></strong>: Establece el tamaño máximo permitido para una solicitud multipart a 100MB.</li>
</ul>
<h4 id="resultado-final"><strong>Resultado Final</strong></h4>
<h4 id="prueba-del-endpoint-post"><strong>Prueba del Endpoint POST</strong></h4>
<p>Volvemos a realizar la prueba del endpoint para subir archivos después de agregar la configuración en <code>application.properties</code>.</p>
<ol>
<li><strong>Configuración de la Solicitud en Postman</strong>:<ul>
<li>Método: POST</li>
<li>URL: <code>http://localhost:8081/api/files/upload</code></li>
<li>Body:<ul>
<li>Selecciona la opción <code>form-data</code>.</li>
<li>Añade un campo con la clave <code>file</code>.</li>
<li>En el valor, selecciona el archivo que deseas subir desde tu sistema local.</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>Al enviar la solicitud, si todo está configurado correctamente, obtendrás una respuesta con el estado <code>200 OK</code> y un JSON que indica la ruta donde se ha guardado el archivo. El resultado se ve así en Postman:</p>
<p><img alt="GeoLabs BookStore" src="../files/figura8.png" title="GeoLabs BookStore" /></p>
<ul>
<li>Insercion de la imagen de la portada para el libro en formato <code>.jpg</code></li>
</ul>
<p><img alt="GeoLabs BookStore" src="../files/figura9.png" title="GeoLabs BookStore" /></p>
<ul>
<li><strong>Explicación del Uso de form-data</strong>:<ul>
<li><strong>form-data</strong>: Esta opción se utiliza para subir archivos y datos mixtos en una solicitud multipart. Es adecuada cuando necesitas enviar archivos junto con otros datos de formulario en una misma solicitud.</li>
<li><strong>Campo <code>file</code></strong>: Este campo representa el archivo que se desea subir. En Postman, puedes seleccionar un archivo de tu sistema local para enviarlo con la solicitud.</li>
</ul>
</li>
</ul>
<h4 id="prueba-del-endpoint-get"><strong>Prueba del Endpoint GET</strong></h4>
<p>Para asegurarnos de que el archivo se ha subido correctamente, realizamos una prueba para consultar el archivo subido.</p>
<ol>
<li>Configuración de la Solicitud en Postman:<ul>
<li>Método: GET</li>
<li>URL: <code>http://localhost:8081/api/files/{fileName}</code><ul>
<li>Reemplaza <code>{fileName}</code> con el nombre del archivo devuelto en la respuesta del endpoint de subida. Por ejemplo: <code>8700404e-404e-429f-a3f1-fb029be470a.pdf</code>.</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>Al enviar la solicitud, si el archivo existe, obtendrás una respuesta con el estado <code>200 OK</code> y el archivo se mostrará en el cuerpo de la respuesta. El resultado se ve así en Postman:</p>
<p><img alt="GeoLabs BookStore" src="../files/figura10.png" title="GeoLabs BookStore" /></p>
<p>Con estas pruebas, hemos verificado que los endpoints para subir y consultar archivos funcionan correctamente, y hemos explicado detalladamente cómo configurar y ejecutar estas pruebas en Postman.</p>
<h2 id="conlusion"><strong>Conlusión</strong></h2>
<p>En esta sesión, hemos recorrido los pasos necesarios para crear una aplicación completa de Spring Boot con funcionalidades avanzadas y buenas prácticas. Desde la creación del proyecto, adicionar dependencias, configuración del entorno de desarrollo con Docker Compose, creación de la entidad, validación de la entidad, creación del repositorio, creación del DTO, validaciones, creación del servicio, creación de mapper, creación del controlador, entre otros.</p>
<p>Con estos pasos, hemos construido una aplicación robusta de Spring Boot, con soporte para manejo de entidades, repositorios, servicios, controladores, manejo de excepciones y funcionalidades avanzadas como la subida de archivos y configuración de Docker Compose. Este conocimiento te permitirá desarrollar aplicaciones eficientes y bien estructuradas con Spring Boot.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Geovanny Mendoza
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/geovannymcode" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/geovannycode" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/geovannycode/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../javascripts/tablesort.js"></script>
      
    
  </body>
</html>